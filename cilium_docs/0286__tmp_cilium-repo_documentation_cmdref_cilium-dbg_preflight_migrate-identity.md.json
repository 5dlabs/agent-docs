{
  "url": "file:///tmp/cilium-repo/Documentation/cmdref/cilium-dbg_preflight_migrate-identity.md",
  "content": "cilium-dbg preflight migrate-identity \n Migrate KVStore-backed identities to kubernetes CRD-backed identities \n Synopsis \n migrate-identity allows migrating to CRD-backed identities while\nminimizing connection interruptions. It will allocate a CRD-backed identity,\nwith the same numeric security identity, for each cilium security identity\ndefined in the kvstore. When cilium-agents are restarted with\nidentity-allocation-mode set to CRD the numeric identities will then be\nequivalent between new instances and not-upgraded ones. In cases where the\nnumeric identity is already in-use by a different set of labels, a new\nnumeric identity is created. \n cilium-dbg preflight migrate-identity [flags]\n \n Options \n       --enable-k8s                                  Enable the k8s clientset (default true)\n      --enable-k8s-api-discovery                    Enable discovery of Kubernetes API groups and resources with the discovery API\n  -h, --help                                        help for migrate-identity\n      --k8s-api-server-urls strings                 Kubernetes API server URLs\n      --k8s-client-burst int                        Burst value allowed for the K8s client (default 20)\n      --k8s-client-connection-keep-alive duration   Configures the keep alive duration of K8s client connections. K8 client is disabled if the value is set to 0 (default 30s)\n      --k8s-client-connection-timeout duration      Configures the timeout of K8s client connections. K8s client is disabled if the value is set to 0 (default 30s)\n      --k8s-client-qps float32                      Queries per second limit for the K8s client (default 10)\n      --k8s-heartbeat-timeout duration              Configures the timeout for api-server heartbeat, set to 0 to disable (default 30s)\n      --k8s-kubeconfig-path string                  Absolute path of the kubernetes kubeconfig file\n      --kvstore string                              Key-value store type\n      --kvstore-opt map                             Key-value store options e.g. etcd.address=127.0.0.1:4001\n \n Options inherited from parent commands \n       --config string        Config file (default is $HOME/.cilium.yaml)\n  -D, --debug                Enable debug messages\n  -H, --host string          URI to server-side API\n      --log-driver strings   Logging endpoints to use (example: syslog)\n      --log-opt map          Log driver options (example: format=json)\n \n SEE ALSO \n \n cilium-dbg preflight \t - Cilium upgrade helper",
  "item_type": "markdown",
  "module_path": "/tmp/cilium-repo/Documentation/cmdref/cilium-dbg_preflight_migrate-identity.md",
  "extracted_at": "2025-09-03T01:13:28.954195Z"
}