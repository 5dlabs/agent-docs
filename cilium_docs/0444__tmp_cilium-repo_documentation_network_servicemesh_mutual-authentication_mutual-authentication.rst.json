{
  "url": "file:///tmp/cilium-repo/Documentation/network/servicemesh/mutual-authentication/mutual-authentication.rst",
  "content": ".. only:: not (epub or latex or html)\n\n    WARNING: You are looking at unreleased Cilium documentation.\n    Please use the official rendered version released here:\n    https://docs.cilium.io\n\n.. _gs_mutual_authentication:\n\n****************************\nMutual Authentication (Beta)\n****************************\n\n.. note::\n\n    This is a beta feature. Please provide feedback and file a GitHub issue if\n    you experience any problems.\n\n    This feature is still incomplete, see :ref:`mutual_auth_roadmap` below for more details.\n\nMutual Authentication and mTLS Background\n#########################################\n\nMutual Transport Layer Security (mTLS) is a mechanism that ensures the authenticity, integrity, \nand confidentiality of data exchanged between two entities over a network.\n\nUnlike traditional TLS, which involves a one-way authentication process where the client verifies the \nserver's identity, mutual TLS adds an additional layer of security by requiring both the client and the server to authenticate each other.\n\nMutual TLS aims at providing authentication, confidentiality and integrity to service-to-service communications. \n\nMutual Authentication in Cilium\n###############################\n\nCilium's mTLS-based Mutual Authentication support brings the mutual authentication handshake out-of-band for regular connections.\n\nFor Cilium to meet most of the common requirements for service-to-service authentication and encryption, users must enable encryption.\n\n.. Note::\n\n    Cilium's encryption features,  :ref:`encryption_wg` and :ref:`encryption_ipsec`, can be enabled \n    to automatically create and maintain encrypted connections between Pods.\n\nTo address the challenge of identity verification in dynamic and heterogeneous environments, \nmutual authentication requires a framework secure identity verification for distributed systems.\n\n.. Note::\n\n    To learn more about the Mutual Authentication architecture for the Cilium Service Mesh, read the `CFP <https://github.com/cilium/design-cfps/blob/main/cilium/CFP-22215-mutual-auth-for-service-mesh.md>`_.\n\n.. _identity_management:\n\nIdentity Management\n###################\n\nIn Cilium's current mutual authentication support, identity management is provided through the use of \nSPIFFE (Secure Production Identity Framework for Everyone).\n\nSPIFFE benefits\n---------------\nHere are some of the benefits provided by `SPIFFE <https://spiffe.io/>`_ :\n\n- Trustworthy identity issuance: SPIFFE provides a standardized mechanism for issuing and managing identities. \n  It ensures that each service in a distributed system receives a unique and verifiable identity, even in dynamic environments where services may scale up or down frequently.\n- Identity attestation: SPIFFE allows services to prove their identities through attestation. \n  It ensures that services can demonstrate their authenticity and integrity by providing verifiable evidence about their identity, like digital signatures or cryptographic proofs.\n- Dynamic and scalable environments: SPIFFE addresses the challenges of identity management in dynamic environments. \n  It supports automatic identity issuance, rotation, and revocation, which are critical in cloud-native architectures where services may be constantly deployed, updated, or retired.\n\nCilium and SPIFFE\n-----------------\n\nSPIFFE provides an API model that allows workloads to request an identity from a central server. In our case, a workload means the same thing that a Cilium Security Identity does - a set of pods described by a label set. \nA SPIFFE identity is a subclass of URI, and looks something like this: ``spiffe://trust.domain/path/with/encoded/info``.\n\nThere are two main parts of a SPIFFE setup:\n\n- A central SPIRE server, which forms the root of trust for the trust domain.\n- A per-node SPIRE agent, which first gets its own identity from the SPIRE server, then validates the identity requests of workloads running on its node.\n\nWhen a workload wants to get its identity, usually at startup, it connects to the local SPIRE agent using the SPIFFE workload API, and describes itself to the agent.\n\nThe SPIRE agent then checks that the workload is really who it says it is, and then connects to the SPIRE server and attests that the workload is requesting an identity, and that the request is valid. \n\nThe SPIRE agent checks a number of things about the workload, that the pod is actually running on the node it's coming from, that the labels match, and so on. \n\nOnce the SPIRE agent has requested an identity from the SPIRE server, it passes it back to the workload in the SVID (SPIFFE Verified Identity Document) format.\nThis document includes a TLS keypair in the X.509 version. \n\nIn the usual flow for SPIRE, the workload requests its own information from the SPIRE server. \nIn Cilium's support for SPIFFE, the Cilium agents get a common SPIFFE identity and can themselves ask for identities on behalf of other workloads.\n\nThis is demonstrated in the following example.\n\n.. include:: installation.rst\n\nExamples\n########\n\nPlease refer to the following example on how to use and leverage\nthe mutual authentication feature:\n\n.. toctree::\n   :maxdepth: 1\n   :glob:\n\n   mutual-authentication-example\n\n.. admonition:: Video\n :class: attention\n\n  If you'd like a video explanation and demo of Mutual Authentication in Cilium, check out `eCHO episode 100: Next-gen mutual authentication in Cilium <https://www.youtube.com/watch?v=BWjDlynXhzg>`__.\n\nLimitations\n###########\n* Cilium Mutual Authentication is still in development and considered beta. Several planned security features have not been implemented yet, see below for details.\n* Cilium's Mutual authentication has only been validated with SPIRE, the production-ready implementation of SPIFFE.\n  As Cilium uses SPIFFE APIs, it's possible that other SPIFFE implementations may work.\n  However, Cilium is currently only tested with the supplied SPIRE install, and using any other SPIFFE implementation is currently not supported.\n* There is no current option to build a single trust domain across multiple clusters for combining Cluster Mesh and Service Mesh.\n  Therefore clusters connected in a Cluster Mesh are not currently compatible with Mutual Authentication.\n* The current support of mutual authentication only works within a Cilium-managed cluster and is not compatible with an external mTLS solution.\n\n\n.. _mutual_auth_roadmap:\n\nDetailed Roadmap Status\n#######################\n\nThe following table shows the roadmap status of the mutual authentication feature.\nThere are several work items outstanding before the feature is complete from a security model perspective.\nFor details, see the [roadmap issue](https://github.com/cilium/cilium/issues/28986).\n\n\n+--------------------------------------------------+----------------------------------------------------------+\n| SPIFFE/SPIRE Integration                         | Beta                                                     |\n+--------------------------------------------------+----------------------------------------------------------+\n| Authentication API for agent                     | Beta                                                     |\n+--------------------------------------------------+----------------------------------------------------------+\n| mTLS handshake between agents                    | Beta                                                     |\n+--------------------------------------------------+----------------------------------------------------------+\n| Auth cache to enable per-identity handshake      | Beta                                                     |\n+--------------------------------------------------+----------------------------------------------------------+\n| CiliumNetworkPolicy support                      | Beta                                                     |\n+--------------------------------------------------+----------------------------------------------------------+\n| Integrate with WireGuard                         | TODO                                                     |\n+--------------------------------------------------+----------------------------------------------------------+\n| Per-connection handshake                         | TODO                                                     |\n+--------------------------------------------------+----------------------------------------------------------+\n| Sync ipcache with auth data                      | TODO                                                     |\n+--------------------------------------------------+----------------------------------------------------------+\n| Detailed documentation of security model         | TODO                                                     |\n+--------------------------------------------------+----------------------------------------------------------+\n| Conduct penetration test of model                | TODO                                                     |\n+--------------------------------------------------+----------------------------------------------------------+\n| Minimize packet drops                            | TODO                                                     |\n+--------------------------------------------------+----------------------------------------------------------+\n| Use auth secret for network encryption           | TODO                                                     |\n+--------------------------------------------------+----------------------------------------------------------+\n| Review maturity and consider for stable          | TODO                                                     |\n+--------------------------------------------------+----------------------------------------------------------+\n",
  "item_type": "unknown",
  "module_path": "/tmp/cilium-repo/Documentation/network/servicemesh/mutual-authentication/mutual-authentication.rst",
  "extracted_at": "2025-09-03T01:13:29.142071Z"
}