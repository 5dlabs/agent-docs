{
  "url": "file:///tmp/cilium-repo/Documentation/network/clustermesh/policy.rst",
  "content": ".. _gs_clustermesh_network_policy:\n\n**************\nNetwork Policy\n**************\n\nThis tutorial will guide you how to define NetworkPolicies affecting multiple\nclusters.\n\nPrerequisites\n#############\n\nYou need to have a functioning Cluster Mesh setup, please follow the guide\n:ref:`gs_clustermesh` to set it up.\n\nSecurity Policies\n#################\n\nAs addressing and network security are decoupled, network security enforcement\nautomatically spans across clusters. Note that Kubernetes security policies are\nnot automatically distributed across clusters, it is your responsibility to\napply ``CiliumNetworkPolicy`` or ``NetworkPolicy`` in all clusters.\n\nAllowing Specific Communication Between Clusters\n================================================\n\nThe following policy illustrates how to allow particular pods to communicate\nbetween two clusters. The cluster name refers to the name given via the\n``--cluster-name`` agent option or ``cluster-name`` ConfigMap option.\n\n.. code-block:: yaml\n\n    apiVersion: \"cilium.io/v2\"\n    kind: CiliumNetworkPolicy\n    metadata:\n      name: \"allow-cross-cluster\"\n    spec:\n      description: \"Allow x-wing to be deployed in the local cluster to contact rebel-base in cluster2\"\n      endpointSelector:\n        matchLabels:\n          name: x-wing\n      egress:\n      - toEndpoints:\n        - matchLabels:\n            name: rebel-base\n            io.cilium.k8s.policy.cluster: cluster2\n\n\nPolicies automatically select endpoints from the local cluster only, unless one\nor multiple cluster are specifically targeted.\n\n.. warning::\n  In Cilium v1.18 or lower, policies used to select endpoints from all clusters by default.\n  See :ref:`change_policy_default_local_cluster` for more details about this change.\n\nThe following policy illustrates how to explicitly allow pods to communicate to all clusters.\n\n.. code-block:: yaml\n\n    apiVersion: \"cilium.io/v2\"\n    kind: CiliumNetworkPolicy\n    metadata:\n      name: \"allow-cross-cluster-any\"\n    spec:\n      description: \"Allow x-wing to be deployed in the local cluster to contact rebel-base in any cluster\"\n      endpointSelector:\n        matchLabels:\n          name: x-wing\n      egress:\n      - toEndpoints:\n        - matchLabels:\n            name: rebel-base\n          matchExpressions:\n            - key: io.cilium.k8s.policy.cluster\n              operator: Exists\n",
  "item_type": "unknown",
  "module_path": "/tmp/cilium-repo/Documentation/network/clustermesh/policy.rst",
  "extracted_at": "2025-09-03T01:13:29.193786Z"
}