{
  "url": "file:///tmp/cilium-repo/Documentation/observability/grafana.rst",
  "content": ".. only:: not (epub or latex or html)\n\n    WARNING: You are looking at unreleased Cilium documentation.\n    Please use the official rendered version released here:\n    https://docs.cilium.io\n\n.. _install_metrics:\n\n****************************\nRunning Prometheus & Grafana\n****************************\n\nInstall Prometheus & Grafana\n============================\n\nThis is an example deployment that includes Prometheus and Grafana in a single\ndeployment.\n\n.. admonition:: Video\n :class: attention\n\n  You can see Cilium, Prometheus and Grafana in action together in the KubeCon + CloudNativeCon talk `Effortless Open Source Observability with Cilium, Prometheus and Grafana <https://www.youtube.com/watch?v=l3zY7wHUkBA>`__.\n\nThe default installation contains:\n\n- **Grafana**: A visualization dashboard with Cilium Dashboard pre-loaded.\n- **Prometheus**: a time series database and monitoring system.\n\n .. parsed-literal::\n\n    $ kubectl apply -f \\ |SCM_WEB|\\/examples/kubernetes/addons/prometheus/monitoring-example.yaml\n    namespace/cilium-monitoring created\n    serviceaccount/prometheus-k8s created\n    configmap/grafana-config created\n    configmap/grafana-cilium-dashboard created\n    configmap/grafana-cilium-operator-dashboard created\n    configmap/grafana-hubble-dashboard created\n    configmap/prometheus created\n    clusterrole.rbac.authorization.k8s.io/prometheus unchanged\n    clusterrolebinding.rbac.authorization.k8s.io/prometheus unchanged\n    service/grafana created\n    service/prometheus created\n    deployment.apps/grafana created\n    deployment.apps/prometheus created\n\nThis example deployment of Prometheus and Grafana will automatically scrape the\nCilium and Hubble metrics. See the :ref:`metrics` configuration guide on how to\nconfigure a custom Prometheus instance.\n\nDeploy Cilium and Hubble with metrics enabled\n=============================================\n\n*Cilium*, *Hubble*, and *Cilium Operator* do not expose metrics by\ndefault. Enabling metrics for these services will open ports ``9962``, ``9965``,\nand ``9963`` respectively on all nodes of your cluster where these components\nare running.\n\nThe metrics for Cilium, Hubble, and Cilium Operator can all be enabled\nindependently of each other with the following Helm values:\n\n - ``prometheus.enabled=true``: Enables metrics for ``cilium-agent``.\n - ``operator.prometheus.enabled=true``: Enables metrics for ``cilium-operator``.\n - ``hubble.metrics.enabled``: Enables the provided list of Hubble metrics.\n   For Hubble metrics to work, Hubble itself needs to be enabled with\n   ``hubble.enabled=true``. See\n   :ref:`Hubble exported metrics<hubble_exported_metrics>` for the list of\n   available Hubble metrics.\n\nRefer to :ref:`metrics` for more details about the individual metrics.\n\n.. include:: ../installation/k8s-install-download-release.rst\n\nDeploy Cilium via Helm as follows to enable all metrics:\n\n.. parsed-literal::\n\n   helm install cilium |CHART_RELEASE| \\\\\n      --namespace kube-system \\\\\n      --set prometheus.enabled=true \\\\\n      --set operator.prometheus.enabled=true \\\\\n      --set hubble.enabled=true \\\\\n      --set hubble.metrics.enableOpenMetrics=true \\\\\n      --set hubble.metrics.enabled=\"{dns,drop,tcp,flow,port-distribution,icmp,httpV2:exemplars=true;labelsContext=source_ip\\\\,source_namespace\\\\,source_workload\\\\,destination_ip\\\\,destination_namespace\\\\,destination_workload\\\\,traffic_direction}\"\n\n.. note::\n\n   You can combine the above Helm options with any of the other installation\n   guides.\n\n\nHow to access Grafana\n=====================\n\nExpose the port on your local machine\n\n.. code-block:: shell-session\n\n    kubectl -n cilium-monitoring port-forward service/grafana --address 0.0.0.0 --address :: 3000:3000\n\nAccess it via your browser: http://localhost:3000\n\nHow to access Prometheus\n========================\n\nExpose the port on your local machine\n\n.. code-block:: shell-session\n\n    kubectl -n cilium-monitoring port-forward service/prometheus --address 0.0.0.0 --address :: 9090:9090\n\nAccess it via your browser: http://localhost:9090\n\nExamples\n========\n\nGeneric\n-------\n\n.. image:: images/grafana_generic.png\n\nNetwork\n-------\n\n.. image:: images/grafana_network.png\n\nPolicy\n-------\n\n.. image:: images/grafana_policy.png\n.. image:: images/grafana_policy2.png\n\nEndpoints\n---------\n\n.. image:: images/grafana_endpoints.png\n\nControllers\n-----------\n\n.. image:: images/grafana_controllers.png\n\nKubernetes\n----------\n\n.. image:: images/grafana_k8s.png\n\nHubble General Processing\n-------------------------\n\n.. image:: images/grafana_hubble_general_processing.png\n\nHubble Networking\n-----------------\n.. note::\n\n   The ``port-distribution`` metric is disabled by default.\n   Refer to :ref:`metrics` for more details about the individual metrics.\n\n.. image:: images/grafana_hubble_network.png\n.. image:: images/grafana_hubble_tcp.png\n.. image:: images/grafana_hubble_icmp.png\n\nHubble DNS\n----------\n\n.. image:: images/grafana_hubble_dns.png\n\nHubble HTTP\n-----------\n\n.. image:: images/grafana_hubble_http.png\n\nHubble Network Policy\n---------------------\n\n.. image:: images/grafana_hubble_network_policy.png\n",
  "item_type": "unknown",
  "module_path": "/tmp/cilium-repo/Documentation/observability/grafana.rst",
  "extracted_at": "2025-09-03T01:13:29.331967Z"
}