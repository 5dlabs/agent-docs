{
  "url": "file:///tmp/cilium-repo/Documentation/network/ebpf/lifeofapacket.rst",
  "content": ".. only:: not (epub or latex or html)\n\n    WARNING: You are looking at unreleased Cilium documentation.\n    Please use the official rendered version released here:\n    https://docs.cilium.io\n\n################\nLife of a Packet\n################\n\nThis documentation page overviews the life of a packet from an eBPF datapath perspective\nby explaining three different scenarios.\n\n.. admonition:: Video\n  :class: attention\n\n  You can also watch a video explanation of this topic that also explores the tools available within Cilium to help\n  you understand the life of a packet in `eCHO Episode 51: Life of a Packet with Cilium <https://www.youtube.com/watch?v=0BKU6avwS98&t=494s>`__.\n\nEndpoint to Endpoint\n====================\n\nFirst we show the local endpoint to endpoint flow with optional L7 Policy on\negress and ingress. Followed by the same endpoint to endpoint flow with\nsocket layer enforcement enabled. With socket layer enforcement enabled for TCP\ntraffic the\nhandshake initiating the connection will traverse the endpoint policy object until TCP state\nis ESTABLISHED. Then after the connection is ESTABLISHED only the L7 Policy\nobject is still required.\n\n.. image:: _static/cilium_bpf_endpoint.svg\n\nEgress from Endpoint\n====================\n\nNext we show local endpoint to egress with optional overlay network. In the\noptional overlay network traffic is forwarded out the Linux network interface\ncorresponding to the overlay. In the default case the overlay interface is\nnamed cilium_vxlan. Similar to above, when socket layer enforcement is enabled\nand a L7 proxy is in use we can avoid running the endpoint policy block between\nthe endpoint and the L7 Policy for TCP traffic. An optional L3 encryption block\nwill encrypt the packet if enabled.\n\n.. image:: _static/cilium_bpf_egress.svg\n\nIngress to Endpoint\n===================\n\nFinally we show ingress to local endpoint also with optional overlay network.\nSimilar to above socket layer enforcement can be used to avoid a set of\npolicy traversals between the proxy and the endpoint socket. If the packet\nis encrypted upon receive it is first decrypted and then handled through\nthe normal flow.\n\n.. image:: _static/cilium_bpf_ingress.svg\n\nThis completes the datapath overview. More BPF specifics can be found in the\n:ref:`bpf_guide`. Additional details on how to extend the L7 Policy\nexist in the :ref:`envoy` section.\n",
  "item_type": "unknown",
  "module_path": "/tmp/cilium-repo/Documentation/network/ebpf/lifeofapacket.rst",
  "extracted_at": "2025-09-03T01:13:29.219661Z"
}