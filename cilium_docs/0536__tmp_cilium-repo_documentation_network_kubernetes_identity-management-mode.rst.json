{
  "url": "file:///tmp/cilium-repo/Documentation/network/kubernetes/identity-management-mode.rst",
  "content": ".. only:: not (epub or latex or html)\n\n    WARNING: You are looking at unreleased Cilium documentation.\n    Please use the official rendered version released here:\n    https://docs.cilium.io\n\n.. _IdentityManagementMode:\n\n***************************\nIdentity Management Mode\n***************************\n\nCilium supports Cilium Identity (CID) management by either the Cilium Agents (default) or the\nCilium Operator.\n\nWhen the Operator manages identities, identity creation is centralized. This provides benefits\nsuch as reduced CID duplication, which can occur when multiple Agents simultaneously create identities for\nthe same set of labels. Given that there is a limitation on the maximum number of identities in a cluster\nand eBPF Policy Map size (see :ref:`bpf_map_limitations`), when the operator manages identities, we can improve the\nreliability of network policies and cluster scalability.\n\n.. note::\n\n    Labels relevant to identity management may be configured in the Cilium ConfigMap (see: :ref:`identity-relevant-labels`).\n    If the Cilium Operator is managing identities, both the Operator and Agents must be restarted to pick up the new label\n    pattern setting.\n\nEnable Identity Management by the Cilium Operator (Beta)\n=========================================================\n\n.. include:: ../../beta.rst\n\nThe Cilium Agents manage CIDs by default. This section describes the steps necessary for enabling CID management by the Cilium Operator.\n\nEnable Operator Managing Identities on a New Cluster\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nTo enable the Cilium Operator to manage identities on a new cluster, set the ``identityManagementMode`` value to ``operator`` in your Helm chart\nor set the ``identity-management-mode`` flag to ``operator`` in the ``cilium-config`` configmap.\n\nHow to Migrate from Cilium Agent to Cilium Operator Managing Identities\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn order to minimize disruptions to connections or workload management, the following procedure should be followed. Note that in order\nto prevent disruptions to the cluster, there is an intermediate state where both the Cilium Agents and the Operator manage identities.\nAs long as the Cilium Agents are creating identities, the CID duplication issue may occur. The transitional state is intended to\nonly be used temporarily for the purpose of migrating identity management modes.\n\n#. Allow the Operator to also manage identities by setting the ``identityManagementMode`` value to ``both`` in your Helm chart or\n   by setting the ``identity-management-mode`` flag to ``both`` in the ``cilium-config`` configmap. Restart the Operator.\n\n#. Once the operator is running, upgrade the Cilium Agents by setting the ``identityManagementMode`` value to ``operator``\n   or by setting the ``identity-management-mode`` flag to ``operator`` and restarting the Cilium Agent DaemonSet.\n\nHow to Downgrade from Cilium Operator to Cilium Agent Managing Identities\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nFor a safe downgrade, the following procedure should be followed.\n\n#. First, downgrade the Cilium Agents by setting the ``identityManagementMode`` value to ``both`` in your Helm chart or\n   by setting the ``identity-management-mode`` flag to ``both`` in the ``cilium-config`` configmap. Restart the Cilium Agent DaemonSet.\n\n#. Once the Cilium Agents are running, downgrade the Operator by setting the ``identityManagementMode`` value to ``agent`` and restarting\n   the Operator.\n\nMetrics\n========\nMetrics for identity management by the operator are documented in the :ref:`identity_management_metrics` section of the metric documentation.\n",
  "item_type": "unknown",
  "module_path": "/tmp/cilium-repo/Documentation/network/kubernetes/identity-management-mode.rst",
  "extracted_at": "2025-09-03T01:13:29.244131Z"
}