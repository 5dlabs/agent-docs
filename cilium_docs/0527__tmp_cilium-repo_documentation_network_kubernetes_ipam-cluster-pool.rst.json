{
  "url": "file:///tmp/cilium-repo/Documentation/network/kubernetes/ipam-cluster-pool.rst",
  "content": ".. only:: not (epub or latex or html)\n\n    WARNING: You are looking at unreleased Cilium documentation.\n    Please use the official rendered version released here:\n    http://docs.cilium.io\n\n.. _gsg_ipam_crd_cluster_pool:\n\n**************************************\nCRD-Backed by Cilium Cluster-Pool IPAM\n**************************************\n\nThis is a quick tutorial walking through how to enable CRD-backed by Cilium\ncluster-pool IPAM. The purpose of this tutorial is to show how components are\nconfigured and resources interact with each other to enable users to automate or\nextend on their own.\n\nFor more details, see the section :ref:`ipam_crd_cluster_pool`\n\nEnable Cluster-pool IPAM mode\n=============================\n\n#. Setup Cilium for Kubernetes using helm with the options:\n   ``--set ipam.mode=cluster-pool``.\n#. Depending if you are using IPv4 and / or IPv6, you might want to adjust\n   the ``podCIDR`` allocated for your cluster's pods with the options:\n\n   * ``--set ipam.operator.clusterPoolIPv4PodCIDRList=<IPv4CIDR>``\n   * ``--set ipam.operator.clusterPoolIPv6PodCIDRList=<IPv6CIDR>``\n\n#. To adjust the CIDR size that should be allocated for each node you can use\n   the following options:\n\n   * ``--set ipam.operator.clusterPoolIPv4MaskSize=<IPv4MaskSize>``\n   * ``--set ipam.operator.clusterPoolIPv6MaskSize=<IPv6MaskSize>``\n\n#. Deploy Cilium and Cilium-Operator. Cilium will automatically wait until the\n   ``podCIDR`` is allocated for its node by Cilium Operator.\n\nValidate installation\n=====================\n\n#. Validate that Cilium has started up correctly\n\n   .. code-block:: shell-session\n\n           $ cilium-dbg status --all-addresses\n           KVStore:                Ok   etcd: 1/1 connected, has-quorum=true: https://192.168.60.11:2379 - 3.3.12 (Leader)\n           [...]\n           IPAM:                   IPv4: 2/256 allocated,\n           Allocated addresses:\n             10.0.0.1 (router)\n             10.0.0.3 (health)\n\n#. Validate the ``spec.ipam.podCIDRs`` section:\n\n   .. code-block:: shell-session\n\n       $ kubectl get cn k8s1 -o yaml\n       apiVersion: cilium.io/v2\n       kind: CiliumNode\n       metadata:\n         name: k8s1\n         [...]\n       spec:\n         ipam:\n           podCIDRs:\n             - 10.0.0.0/24\n",
  "item_type": "unknown",
  "module_path": "/tmp/cilium-repo/Documentation/network/kubernetes/ipam-cluster-pool.rst",
  "extracted_at": "2025-09-03T01:13:29.237786Z"
}