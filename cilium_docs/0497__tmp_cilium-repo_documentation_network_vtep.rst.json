{
  "url": "file:///tmp/cilium-repo/Documentation/network/vtep.rst",
  "content": ".. only:: not (epub or latex or html) \n WARNING: You are looking at unreleased Cilium documentation.\nPlease use the official rendered version released here:\nhttps://docs.cilium.io\n \n .. _enable_vtep: \n \n VXLAN Tunnel Endpoint (VTEP) Integration (beta) \n \n .. include:: ../beta.rst \n The VTEP integration allows third party VTEP devices to send and receive traffic to\nand from Cilium-managed pods directly using VXLAN. This allows for example external\nload balancers like BIG-IP to load balance traffic to Cilium-managed pods using VXLAN. \n This document explains how to enable VTEP support and configure Cilium with VTEP\nendpoint IPs, CIDRs, and MAC addresses. \n .. note:: \n This guide assumes that Cilium has been correctly installed in your\nKubernetes cluster. Please see :ref: k8s_quick_install  for more\ninformation. If unsure, run  cilium status  and validate that Cilium is up\nand running. This guide also assumes VTEP devices has been configured with\nVTEP endpoint IP, VTEP CIDRs, VTEP MAC addresses (VTEP MAC). The VXLAN network\nidentifier (VNI)  must  be configured as VNI  2 , which represents traffic\nfrom the VTEP as the world identity. See :ref: reserved_labels  for more details. \n Enable VXLAN Tunnel Endpoint (VTEP) integration \n This feature is disabled by default. When enabling the\nVTEP integration, you must also specify the IPs, CIDR ranges and MACs for each VTEP device\nas part of the configuration. \n .. tabs:: \n .. group-tab:: Helm\n\n    If you installed Cilium via ``helm install``, you may enable\n    the VTEP support with the following command:\n\n    .. parsed-literal::\n\n       helm upgrade cilium |CHART_RELEASE| \\\n          --namespace kube-system \\\n          --reuse-values \\\n          --set vtep.enabled=\"true\" \\\n          --set vtep.endpoint=\"10.169.72.236 10.169.72.238\" \\\n          --set vtep.cidr=\"10.1.1.0/24   10.1.2.0/24\" \\\n          --set vtep.mask=\"255.255.255.0\" \\\n          --set vtep.mac=\"82:36:4c:98:2e:56 82:36:4c:98:2e:58\" \\\n\n.. group-tab:: ConfigMap\n\n   VTEP support can be enabled by setting the\n   following options in the ``cilium-config`` ConfigMap:\n\n   .. code-block:: yaml\n\n      enable-vtep:   \"true\"\n      vtep-endpoint: \"10.169.72.236    10.169.72.238\"\n      vtep-cidr:     \"10.1.1.0/24   10.1.2.0/24\"\n      vtep-mask:     \"255.255.255.0\"\n      vtep-mac:      \"82:36:4c:98:2e:56 82:36:4c:98:2e:58\"\n\n   Restart Cilium daemonset:\n\n   .. code-block:: bash\n\n      kubectl -n $CILIUM_NAMESPACE rollout restart ds/cilium\n \n How to test VXLAN Tunnel Endpoint (VTEP) Integration \n Start up a Linux VM with node network connectivity to Cilium node.\nTo configure the Linux VM, you will need to be  root  user or\nrun the commands below using  sudo . \n :: \n  Test VTEP Integration\n\n Node IP: 10.169.72.233\n+--------------------------+            VM IP: 10.169.72.236\n|                          |            +------------------+\n| CiliumNode               |            |  Linux VM        |\n|                          |            |                  |\n|  +---------+             |            |                  |\n|  | busybox |             |            |                  |\n|  |         |           ens192<------>ens192              |\n|  +--eth0---+             |            |                  |\n|      |                   |            +-----vxlan2-------+\n|      |                   |\n|   lxcxxx                 |\n|      |                   |\n+------+-----cilium_vxlan--+\n \n .. code-block:: bash \n Create a vxlan device and set the MAC address. \n ip link add vxlan2 type vxlan id 2 dstport 8472 local 10.169.72.236 dev ens192\nip link set dev vxlan2 address 82:36:4c:98:2e:56\nip link set vxlan2 up \n Configure the VTEP with IP 10.1.1.236 to handle CIDR 10.1.1.0/24. \n ip addr add 10.1.1.236/24 dev vxlan2 \n Assume Cilium podCIDR network is 10.0.0.0/16, add route to 10.0.0.0/16 \n ip route add 10.0.0.0/16 dev vxlan2  proto kernel  scope link  src 10.1.1.236 \n Allow Linux VM to send ARP broadcast request to Cilium node for busybox pod \n ARP resolution through vxlan2 device \n bridge fdb append 00:00:00:00:00:00 dst 10.169.72.233 dev vxlan2 \n If you are managing multiple VTEPs, follow the above process for each instance.\nOnce the VTEPs are configured, you can configure Cilium to use the MAC, IP and CIDR ranges that\nyou have configured on the VTEPs. Follow the instructions to :ref: enable_vtep . \n To test the VTEP network connectivity: \n .. code-block:: bash \n ping Cilium-managed busybox pod IP 10.0.1.1 for example from Linux VM \n ping 10.0.1.1 \n Limitations \n \n This feature does not work with ipsec encryption between Cilium managed pod and VTEPs.",
  "item_type": "unknown",
  "module_path": "/tmp/cilium-repo/Documentation/network/vtep.rst",
  "extracted_at": "2025-09-03T01:13:29.206519Z"
}