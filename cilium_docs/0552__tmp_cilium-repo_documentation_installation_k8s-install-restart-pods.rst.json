{
  "url": "file:///tmp/cilium-repo/Documentation/installation/k8s-install-restart-pods.rst",
  "content": "Restart unmanaged Pods\n======================\n\nIf you did not create a cluster with the nodes tainted with the taint\n``node.cilium.io/agent-not-ready``, then unmanaged pods need to be restarted\nmanually. Restart all already running pods which are not running in\nhost-networking mode to ensure that Cilium starts managing them. This is\nrequired to ensure that all pods which have been running before Cilium was\ndeployed have network connectivity provided by Cilium and NetworkPolicy applies\nto them:\n\n.. code-block:: shell-session\n\n    $ kubectl get pods --all-namespaces -o custom-columns=NAMESPACE:.metadata.namespace,NAME:.metadata.name,HOSTNETWORK:.spec.hostNetwork --no-headers=true | grep '<none>' | awk '{print \"-n \"$1\" \"$2}' | xargs -L 1 -r kubectl delete pod\n    pod \"event-exporter-v0.2.3-f9c896d75-cbvcz\" deleted\n    pod \"fluentd-gcp-scaler-69d79984cb-nfwwk\" deleted\n    pod \"heapster-v1.6.0-beta.1-56d5d5d87f-qw8pv\" deleted\n    pod \"kube-dns-5f8689dbc9-2nzft\" deleted\n    pod \"kube-dns-5f8689dbc9-j7x5f\" deleted\n    pod \"kube-dns-autoscaler-76fcd5f658-22r72\" deleted\n    pod \"kube-state-metrics-7d9774bbd5-n6m5k\" deleted\n    pod \"l7-default-backend-6f8697844f-d2rq2\" deleted\n    pod \"metrics-server-v0.3.1-54699c9cc8-7l5w2\" deleted\n\n.. note::\n\n    This may error out on macOS due to ``-r`` being unsupported by\n    ``xargs``. In this case you can safely run this command without ``-r``\n    with the symptom that this will hang if there are no pods to\n    restart. You can stop this with ``ctrl-c``.\n",
  "item_type": "unknown",
  "module_path": "/tmp/cilium-repo/Documentation/installation/k8s-install-restart-pods.rst",
  "extracted_at": "2025-09-03T01:13:29.300850Z"
}