{
  "url": "file:///tmp/cilium-repo/Documentation/network/concepts/fragmentation.rst",
  "content": ".. only:: not (epub or latex or html)\n\n    WARNING: You are looking at unreleased Cilium documentation.\n    Please use the official rendered version released here:\n    https://docs.cilium.io\n\n.. _concepts_fragmentation:\n\nIPv4 Fragment Handling\n======================\n\nBy default, Cilium configures the eBPF datapath to perform IP fragment tracking\nto allow protocols that do not support segmentation (such as UDP) to\ntransparently transmit large messages over the network. This feature may be\nconfigured using the following options:\n\n- ``--enable-ipv4-fragment-tracking``: Enable or disable IPv4 fragment\n  tracking. Enabled by default.\n- ``--bpf-fragments-map-max``: Control the maximum number of active concurrent\n  connections using IP fragmentation. For the defaults, see `bpf_map_limitations`.\n\nTo check whether fragmentation occurred, check the value of ``cilium_bpf_map_pressure{map_name=\"cilium_ipv4_frag_datagrams\"}`` metric. If it's non-zero, it means that fragmentation occurred.\n\n.. note::\n\n    When running Cilium with kube-proxy, fragmented NodePort traffic may break due\n    to a kernel bug where route MTU is not respected for forwarded packets. Cilium\n    fragments tracking requires the first logical fragment to arrive first. Due to the\n    kernel bug, additional fragmentation on the outer encapsulation layer may happen\n    that causes packet reordering and results in a failure in tracking the fragments.\n\n    The kernel bug has been `fixed <https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=02a1b175b0e92d9e0fa5df3957ade8d733ceb6a0>`_\n    and backported to all maintained kernel versions. If you observe connectivity problems,\n    ensure that the kernel package on your nodes has been upgraded recently before\n    reporting an issue.\n\n.. include:: ../../beta.rst\n",
  "item_type": "unknown",
  "module_path": "/tmp/cilium-repo/Documentation/network/concepts/fragmentation.rst",
  "extracted_at": "2025-09-03T01:13:29.209332Z"
}