{
  "url": "file:///tmp/cilium-repo/Documentation/cmdref/cilium-agent.md",
  "content": "cilium-agent \n Run the cilium agent \n cilium-agent [flags]\n \n Options \n       --agent-health-port int                                     TCP port for agent health status API (default 9879)\n      --agent-health-require-k8s-connectivity                     Require Kubernetes connectivity in agent health endpoint (default true)\n      --agent-labels strings                                      Additional labels to identify this agent in monitor events\n      --agent-liveness-update-interval duration                   Interval at which the agent updates liveness time for the datapath (default 1s)\n      --agent-not-ready-taint-key string                          Key of the taint indicating that Cilium is not ready on the node (default \"node.cilium.io/agent-not-ready\")\n      --allocator-list-timeout duration                           Timeout for listing allocator state before exiting (default 3m0s)\n      --allow-icmp-frag-needed                                    Allow ICMP Fragmentation Needed type packets for purposes like TCP Path MTU. (default true)\n      --allow-localhost string                                    Policy when to allow local stack to reach local endpoints { auto | always | policy } (default \"auto\")\n      --annotate-k8s-node                                         Annotate Kubernetes node\n      --api-rate-limit string                                     API rate limiting configuration (example: --api-rate-limit endpoint-create=rate-limit:10/m,rate-burst:2)\n      --auto-create-cilium-node-resource                          Automatically create CiliumNode resource for own node on startup (default true)\n      --auto-direct-node-routes                                   Enable automatic L2 routing between nodes\n      --bgp-router-id-allocation-ip-pool string                   IP pool to allocate the BGP router-id from when the mode is 'ip-pool'\n      --bgp-router-id-allocation-mode string                      BGP router-id allocation mode. Currently supported values: 'default' or 'ip-pool' (default \"default\")\n      --bpf-auth-map-max int                                      Maximum number of entries in auth map (default 524288)\n      --bpf-conntrack-accounting                                  Enable CT accounting for packets and bytes (default false)\n      --bpf-ct-global-any-max int                                 Maximum number of entries in non-TCP CT table (default 262144)\n      --bpf-ct-global-tcp-max int                                 Maximum number of entries in TCP CT table (default 524288)\n      --bpf-ct-timeout-regular-any duration                       Timeout for entries in non-TCP CT table (default 1m0s)\n      --bpf-ct-timeout-regular-tcp duration                       Timeout for established entries in TCP CT table (default 2h13m20s)\n      --bpf-ct-timeout-regular-tcp-fin duration                   Teardown timeout for entries in TCP CT table (default 10s)\n      --bpf-ct-timeout-regular-tcp-syn duration                   Establishment timeout for entries in TCP CT table (default 1m0s)\n      --bpf-ct-timeout-service-any duration                       Timeout for service entries in non-TCP CT table (default 1m0s)\n      --bpf-ct-timeout-service-tcp duration                       Timeout for established service entries in TCP CT table (default 2h13m20s)\n      --bpf-ct-timeout-service-tcp-grace duration                 Timeout for graceful shutdown of service entries in TCP CT table (default 1m0s)\n      --bpf-distributed-lru                                       Enable per-CPU BPF LRU backend memory\n      --bpf-events-drop-enabled                                   Expose 'drop' events for Cilium monitor and/or Hubble (default true)\n      --bpf-events-policy-verdict-enabled                         Expose 'policy verdict' events for Cilium monitor and/or Hubble (default true)\n      --bpf-events-trace-enabled                                  Expose 'trace' events for Cilium monitor and/or Hubble (default true)\n      --bpf-fragments-map-max int                                 Maximum number of entries in fragments tracking map (default 8192)\n      --bpf-lb-acceleration string                                BPF load balancing acceleration via XDP (\"native\", \"disabled\") (default \"disabled\")\n      --bpf-lb-algorithm string                                   BPF load balancing algorithm (\"random\", \"maglev\") (default \"random\")\n      --bpf-lb-algorithm-annotation                               Enable service-level annotation for configuring BPF load balancing algorithm\n      --bpf-lb-dsr-dispatch string                                BPF load balancing DSR dispatch method (\"opt\", \"ipip\", \"geneve\") (default \"opt\")\n      --bpf-lb-external-clusterip                                 Enable external access to ClusterIP services (default false)\n      --bpf-lb-maglev-hash-seed string                            Maglev cluster-wide hash seed (base64 encoded) (default \"JLfvgnHc2kaSUFaI\")\n      --bpf-lb-maglev-table-size uint                             Maglev per service backend table size (parameter M, one of: [251 509 1021 2039 4093 8191 16381 32749 65521 131071]) (default 16381)\n      --bpf-lb-map-max int                                        Maximum number of entries in Cilium BPF lbmap (default 65536)\n      --bpf-lb-mode string                                        BPF load balancing mode (\"snat\", \"dsr\", \"hybrid\") (default \"snat\")\n      --bpf-lb-mode-annotation                                    Enable service-level annotation for configuring BPF load balancing mode\n      --bpf-lb-rss-ipv4-src-cidr string                           BPF load balancing RSS outer source IPv4 CIDR prefix for IPIP\n      --bpf-lb-rss-ipv6-src-cidr string                           BPF load balancing RSS outer source IPv6 CIDR prefix for IPIP\n      --bpf-lb-sock                                               Enable socket-based LB for E/W traffic\n      --bpf-lb-sock-hostns-only                                   Skip socket LB for services when inside a pod namespace, in favor of service LB at the pod interface. Socket LB is still used when in the host namespace. Required by service mesh (e.g., Istio, Linkerd).\n      --bpf-lb-source-range-all-types                             Propagate loadbalancerSourceRanges to all corresponding service types\n      --bpf-map-dynamic-size-ratio float                          Ratio (0.0-1.0] of total system memory to use for dynamic sizing of CT, NAT and policy BPF maps (default 0.0025)\n      --bpf-nat-global-max int                                    Maximum number of entries for the global BPF NAT table (default 524288)\n      --bpf-neigh-global-max int                                  Maximum number of entries for the global BPF neighbor table (default 524288)\n      --bpf-node-map-max uint32                                   Sets size of node bpf map which will be the max number of unique Node IPs in the cluster (default 16384)\n      --bpf-policy-map-max int                                    Maximum number of entries in endpoint policy map (per endpoint) (default 16384)\n      --bpf-policy-map-pressure-metrics-threshold float           Sets threshold for emitting pressure metrics of policy maps (default 0.1)\n      --bpf-policy-stats-map-max int                              Maximum number of entries in bpf policy stats map (default 65536)\n      --bpf-root string                                           Path to BPF filesystem\n      --bpf-sock-rev-map-max int                                  Maximum number of entries for the SockRevNAT BPF map\n      --certificates-directory string                             Root directory to find certificates specified in L7 TLS policy enforcement (default \"/var/run/cilium/certs\")\n      --cgroup-root string                                        Path to Cgroup2 filesystem\n      --cluster-health-port int                                   TCP port for cluster-wide network connectivity health API (default 4240)\n      --cluster-id uint32                                         Unique identifier of the cluster\n      --cluster-name string                                       Name of the cluster. It must consist of at most 32 lower case alphanumeric characters and '-', start and end with an alphanumeric character. (default \"default\")\n      --clustermesh-config string                                 Path to the ClusterMesh configuration directory\n      --clustermesh-sync-timeout duration                         Timeout waiting for the initial synchronization of information from remote clusters (default 1m0s)\n      --cni-chaining-mode string                                  Enable CNI chaining with the specified plugin (default \"none\")\n      --cni-chaining-target string                                CNI network name into which to insert the Cilium chained configuration. Use '*' to select any network.\n      --cni-exclusive                                             Whether to remove other CNI configurations\n      --cni-external-routing                                      Whether the chained CNI plugin handles routing on the node\n      --cni-log-file string                                       Path where the CNI plugin should write logs (default \"/var/run/cilium/cilium-cni.log\")\n      --config string                                             Configuration file (default \"$HOME/ciliumd.yaml\")\n      --config-dir string                                         Configuration directory that contains a file for each option\n      --connectivity-probe-frequency-ratio float                  Ratio of the connectivity probe frequency vs resource usage, a float in [0, 1]. 0 will give more frequent probing, 1 will give less frequent probing. Probing frequency is dynamically adjusted based on the cluster size. (default 0.5)\n      --conntrack-gc-interval duration                            Overwrite the connection-tracking garbage collection interval\n      --conntrack-gc-max-interval duration                        Set the maximum interval for the connection-tracking garbage collection\n      --container-ip-local-reserved-ports string                  Instructs the Cilium CNI plugin to reserve the provided comma-separated list of ports in the container network namespace. Prevents the container from using these ports as ephemeral source ports (see Linux ip_local_reserved_ports). Use this flag if you observe port conflicts between transparent DNS proxy requests and host network namespace services. Value \"auto\" reserves the WireGuard and VXLAN ports used by Cilium (default \"auto\")\n      --controller-group-metrics strings                          List of controller group names for which to to enable metrics. Accepts 'all' and 'none'. The set of controller group names available is not guaranteed to be stable between Cilium versions.\n      --crd-wait-timeout duration                                 Cilium will exit if CRDs are not available within this duration upon startup (default 5m0s)\n      --datapath-mode string                                      Datapath mode name (veth, netkit, netkit-l2) (default \"veth\")\n  -D, --debug                                                     Enable debugging mode\n      --debug-verbose strings                                     List of enabled verbose debug groups\n      --devices strings                                           List of devices facing cluster/external network (used for BPF NodePort, BPF masquerading and host firewall); supports '+' as wildcard in device name, e.g. 'eth+'; support '!' to exclude devices, e.g. '!eth+' excludes any device with prefix 'eth'. Note '!' says nothing about which ones to include. A device must match other criteria to be selected; The filters are matched in order and whatever matched first wins.\n      --direct-routing-device string                              Device name used to connect nodes in direct routing mode (used by BPF NodePort, BPF host routing; if empty, automatically set to a device with k8s InternalIP/ExternalIP or with a default route)\n      --direct-routing-skip-unreachable                           Enable skipping L2 routes between nodes on different subnets\n      --disable-endpoint-crd                                      Disable use of CiliumEndpoint CRD\n      --disable-envoy-version-check                               Do not perform Envoy version check\n      --disable-external-ip-mitigation                            Disable ExternalIP mitigation (CVE-2020-8554, default false)\n      --disable-iptables-feeder-rules strings                     Chains to ignore when installing feeder rules.\n      --dns-max-ips-per-restored-rule int                         Maximum number of IPs to maintain for each restored DNS rule (default 1000)\n      --dns-policy-unload-on-shutdown                             Unload DNS policy rules on graceful shutdown\n      --dnsproxy-concurrency-limit int                            Limit concurrency of DNS message processing\n      --dnsproxy-concurrency-processing-grace-period duration     Grace time to wait when DNS proxy concurrent limit has been reached during DNS message processing\n      --dnsproxy-enable-transparent-mode                          Enable DNS proxy transparent mode\n      --dnsproxy-socket-linger-timeout int                        Timeout (in seconds) when closing the connection between the DNS proxy and the upstream server. If set to 0, the connection is closed immediately (with TCP RST). If set to -1, the connection is closed asynchronously in the background (default 10)\n      --dynamic-lifecycle-config string                           List of dynamic lifecycle features and their configuration including the dependencies (default \"[]\")\n      --egress-gateway-policy-map-max int                         Maximum number of entries in egress gateway policy map (default 16384)\n      --egress-gateway-reconciliation-trigger-interval duration   Time between triggers of egress gateway state reconciliations (default 1s)\n      --egress-masquerade-interfaces strings                      Limit iptables-based egress masquerading to interfaces selector\n      --enable-active-connection-tracking                         Count open and active connections to services, grouped by zones defined in fixed-zone-mapping.\n      --enable-auto-protect-node-port-range                       Append NodePort range to net.ipv4.ip_local_reserved_ports if it overlaps with ephemeral port range (net.ipv4.ip_local_port_range) (default true)\n      --enable-bandwidth-manager                                  Enable BPF bandwidth manager\n      --enable-bbr                                                Enable BBR for the bandwidth manager\n      --enable-bbr-hostns-only                                    Enable BBR only in the host network namespace.\n      --enable-bgp-control-plane                                  Enable the BGP control plane.\n      --enable-bgp-control-plane-status-report                    Enable the BGP control plane status reporting (default true)\n      --enable-bgp-legacy-origin-attribute                        Enable LoadBalancerIP routes to be advertised with BGP Origin Attribute set to INCOMPLETE\n      --enable-bpf-clock-probe                                    Enable BPF clock source probing for more efficient tick retrieval\n      --enable-bpf-masquerade                                     Masquerade packets from endpoints leaving the host with BPF instead of iptables\n      --enable-bpf-tproxy                                         Enable BPF-based proxy redirection (beta), if support available\n      --enable-cilium-api-server-access strings                   List of cilium API APIs which are administratively enabled. Supports '*'. (default [*])\n      --enable-cilium-endpoint-slice                              Enable the CiliumEndpointSlice watcher in place of the CiliumEndpoint watcher (beta)\n      --enable-cilium-health-api-server-access strings            List of cilium health API APIs which are administratively enabled. Supports '*'. (default [*])\n      --enable-drift-checker                                      Enables support for config drift checker (default true)\n      --enable-dynamic-config                                     Enables support for dynamic agent config (default true)\n      --enable-dynamic-lifecycle-manager                          Enables support for dynamic lifecycle management\n      --enable-egress-gateway                                     Enable egress gateway\n      --enable-encryption-strict-mode                             Enable encryption strict mode\n      --enable-endpoint-health-checking                           Enable connectivity health checking between virtual endpoints (default true)\n      --enable-endpoint-lockdown-on-policy-overflow               When an endpoint's policy map overflows, shutdown all (ingress and egress) network traffic for that endpoint.\n      --enable-endpoint-routes                                    Use per endpoint routes instead of routing via cilium_host\n      --enable-envoy-config                                       Enable Envoy Config CRDs\n      --enable-extended-ip-protocols                              Enable traffic with extended IP protocols in datapath\n      --enable-gateway-api                                        Enables Envoy secret sync for Gateway API related TLS secrets\n      --enable-gops                                               Enable gops server (default true)\n      --enable-health-check-loadbalancer-ip                       Enable access of the healthcheck nodePort on the LoadBalancerIP. Needs --enable-health-check-nodeport to be enabled\n      --enable-health-check-nodeport                              Enables a healthcheck nodePort server for NodePort services with 'healthCheckNodePort' being set (default true)\n      --enable-health-checking                                    Enable connectivity health checking (default true)\n      --enable-host-firewall                                      Enable host network policies\n      --enable-host-legacy-routing                                Enable the legacy host forwarding model which does not bypass upper stack in host namespace\n      --enable-hubble                                             Enable hubble server\n      --enable-hubble-open-metrics                                Enable exporting hubble metrics in OpenMetrics format.\n      --enable-identity-mark                                      Enable setting identity mark for local traffic (default true)\n      --enable-ingress-controller                                 Enables Envoy secret sync for Ingress controller related TLS secrets\n      --enable-ip-masq-agent                                      Enable BPF ip-masq-agent\n      --enable-ipip-termination                                   Enable plain IPIP/IP6IP6 termination\n      --enable-ipsec                                              Enable IPsec support\n      --enable-ipsec-encrypted-overlay                            Enable IPsec encrypted overlay. If enabled tunnel traffic will be encrypted before leaving the host. Requires ipsec and tunnel mode vxlan to be enabled.\n      --enable-ipsec-key-watcher                                  Enable watcher for IPsec key. If disabled, a restart of the agent will be necessary on key rotations. (default true)\n      --enable-ipv4                                               Enable IPv4 support (default true)\n      --enable-ipv4-big-tcp                                       Enable IPv4 BIG TCP option which increases device's maximum GRO/GSO limits for IPv4\n      --enable-ipv4-fragment-tracking                             Enable IPv4 fragments tracking for L4-based lookups (default true)\n      --enable-ipv4-masquerade                                    Masquerade IPv4 traffic from endpoints leaving the host (default true)\n      --enable-ipv6                                               Enable IPv6 support (default true)\n      --enable-ipv6-big-tcp                                       Enable IPv6 BIG TCP option which increases device's maximum GRO/GSO limits for IPv6\n      --enable-ipv6-fragment-tracking                             Enable IPv6 fragments tracking for L4-based lookups (default true)\n      --enable-ipv6-masquerade                                    Masquerade IPv6 traffic from endpoints leaving the host (default true)\n      --enable-ipv6-ndp                                           Enable IPv6 NDP support\n      --enable-k8s                                                Enable the k8s clientset (default true)\n      --enable-k8s-api-discovery                                  Enable discovery of Kubernetes API groups and resources with the discovery API\n      --enable-l2-announcements                                   Enable L2 announcements\n      --enable-l2-neigh-discovery                                 Enables L2 neighbor discovery used by kube-proxy-replacement and IPsec\n      --enable-l2-pod-announcements                               Enable announcing Pod IPs with Gratuitous ARP and NDP\n      --enable-l7-proxy                                           Enable L7 proxy for L7 policy enforcement (default true)\n      --enable-local-node-route                                   Enable installation of the route which points the allocation prefix of the local node (default true)\n      --enable-local-redirect-policy                              Enable Local Redirect Policy\n      --enable-masquerade-to-route-source                         Masquerade packets to the source IP provided from the routing layer rather than interface address\n      --enable-monitor                                            Enable the monitor unix domain socket server (default true)\n      --enable-nat46x64-gateway                                   Enable NAT46 and NAT64 gateway\n      --enable-node-selector-labels                               Enable use of node label based identity\n      --enable-pmtu-discovery                                     Enable path MTU discovery to send ICMP fragmentation-needed replies to the client\n      --enable-policy string                                      Enable policy enforcement (default \"default\")\n      --enable-policy-secrets-sync                                Enables Envoy secret sync for Secrets used in CiliumNetworkPolicy and CiliumClusterwideNetworkPolicy\n      --enable-remote-node-masquerade                             Masquerade packets from endpoints leaving the host destined to a remote node in BPF masquerading mode. This option requires to set enable-bpf-masquerade to true.\n      --enable-route-mtu-for-cni-chaining                         Enable route MTU for pod netns when CNI chaining is used\n      --enable-sctp                                               Enable SCTP support (beta)\n      --enable-service-topology                                   Enable support for service topology aware hints\n      --enable-standalone-dns-proxy                               Enables standalone DNS proxy\n      --enable-tcx                                                Attach endpoint programs using tcx if supported by the kernel (default true)\n      --enable-tracing                                            Enable tracing while determining policy (debugging)\n      --enable-unreachable-routes                                 Add unreachable routes on pod deletion\n      --enable-vtep                                               Enable  VXLAN Tunnel Endpoint (VTEP) Integration (beta)\n      --enable-well-known-identities                              Enable well-known identities for known Kubernetes components (default true)\n      --enable-wireguard                                          Enable WireGuard\n      --enable-xdp-prefilter                                      Enable XDP prefiltering\n      --enable-xt-socket-fallback                                 Enable fallback for missing xt_socket module (default true)\n      --encrypt-interface string                                  Transparent encryption interface\n      --encrypt-node                                              Enables encrypting traffic from non-Cilium pods and host networking (only supported with WireGuard, beta)\n      --encryption-strict-mode-allow-remote-node-identities       Allows unencrypted traffic from pods to remote node identities within the strict mode CIDR. This is required when tunneling is used or direct routing is used and the node CIDR and pod CIDR overlap.\n      --encryption-strict-mode-cidr string                        In strict-mode encryption, all unencrypted traffic coming from this CIDR and going to this same CIDR will be dropped\n      --endpoint-bpf-prog-watchdog-interval duration              Interval to trigger endpoint BPF programs load check watchdog (default 30s)\n      --endpoint-queue-size int                                   Size of EventQueue per-endpoint (default 25)\n      --endpoint-regen-interval duration                          Periodically recalculate and re-apply endpoint configuration. Set to 0 to disable (default 2m0s)\n      --envoy-access-log-buffer-size uint                         Envoy access log buffer size in bytes (default 4096)\n      --envoy-base-id uint                                        Envoy base ID\n      --envoy-config-retry-interval duration                      Interval in which an attempt is made to reconcile failed EnvoyConfigs. If the duration is zero, the retry is deactivated. (default 15s)\n      --envoy-config-timeout duration                             Timeout that determines how long to wait for Envoy to N/ACK CiliumEnvoyConfig resources (default 2m0s)\n      --envoy-default-log-level string                            Default log level of Envoy application log that is configured if Cilium debug / verbose logging isn't enabled. If not defined, the default log level of the Cilium Agent is used.\n      --envoy-http-upstream-linger-timeout int                    Time in seconds to block Envoy worker thread while an upstream HTTP connection is closing. If set to 0, the connection is closed immediately (with TCP RST). If set to -1, the connection is closed asynchronously in the background. (default -1)\n      --envoy-keep-cap-netbindservice                             Keep capability NET_BIND_SERVICE for Envoy process\n      --envoy-log string                                          Path to a separate Envoy log file, if any\n      --envoy-policy-restore-timeout duration                     Maxiumum time to wait for enpoint policy restoration before starting serving resources to Envoy (default 3m0s)\n      --envoy-secrets-namespace string                            EnvoySecretsNamespace is the namespace having secrets used by CEC\n      --exclude-local-address strings                             Exclude CIDR from being recognized as local address\n      --exclude-node-label-patterns strings                       List of k8s node label regex patterns to be excluded from CiliumNode\n      --external-envoy-proxy                                      whether the Envoy is deployed externally in form of a DaemonSet or not\n      --fixed-identity-mapping map                                Key-value for the fixed identity mapping which allows to use reserved label for fixed identities, e.g. 128=kv-store,129=kube-dns\n      --force-device-detection                                    Forces the auto-detection of devices, even if specific devices are explicitly listed\n      --gateway-api-secrets-namespace string                      GatewayAPISecretsNamespace is the namespace having tls secrets used by CEC, originating from Gateway API\n      --gops-port uint16                                          Port for gops server to listen on (default 9890)\n      --health-check-icmp-failure-threshold int                   Number of ICMP requests sent for each run of the health checker. If at least one ICMP response is received, the node or endpoint is marked as healthy. (default 3)\n  -h, --help                                                      help for cilium-agent\n      --http-idle-timeout uint                                    Time after which a non-gRPC HTTP stream is considered failed unless traffic in the stream has been processed (in seconds); defaults to 0 (unlimited)\n      --http-max-grpc-timeout uint                                Time after which a forwarded gRPC request is considered failed unless completed (in seconds). A \"grpc-timeout\" header may override this with a shorter value; defaults to 0 (unlimited)\n      --http-normalize-path                                       Use Envoy HTTP path normalization options, which currently includes RFC 3986 path normalization, Envoy merge slashes option, and unescaping and redirecting for paths that contain escaped slashes. These are necessary to keep path based access control functional, and should not interfere with normal operation. Set this to false only with caution. (default true)\n      --http-request-timeout uint                                 Time after which a forwarded HTTP request is considered failed unless completed (in seconds); Use 0 for unlimited (default 3600)\n      --http-retry-count uint                                     Number of retries performed after a forwarded request attempt fails (default 3)\n      --http-retry-timeout uint                                   Time after which a forwarded but uncompleted request is retried (connection failures are retried immediately); defaults to 0 (never)\n      --http-stream-idle-timeout uint                             Set Envoy the amount of time that the connection manager will allow a stream to exist with no upstream or downstream activity. Default 300s (default 300)\n      --hubble-disable-tls                                        Allow Hubble server to run on the given listen address without TLS. (default true)\n      --hubble-drop-events                                        Emit packet drop Events related to pods (alpha)\n      --hubble-drop-events-interval duration                      Minimum time between emitting same events (default 2m0s)\n      --hubble-drop-events-reasons strings                        Drop reasons to emit events for (default [auth_required,policy_denied])\n      --hubble-dynamic-metrics-config-path string                 Filepath with dynamic configuration of hubble metrics.\n      --hubble-event-buffer-capacity int                          Capacity of Hubble events buffer. The provided value must be one less than an integer power of two and no larger than 65535 (ie: 1, 3, ..., 2047, 4095, ..., 65535) (default 4095)\n      --hubble-event-queue-size int                               Buffer size of the channel to receive monitor events.\n      --hubble-export-allowlist string                            Specify allowlist as JSON encoded FlowFilters to Hubble exporter.\n      --hubble-export-denylist string                             Specify denylist as JSON encoded FlowFilters to Hubble exporter.\n      --hubble-export-fieldmask strings                           Specify list of fields to use for field mask in Hubble exporter.\n      --hubble-export-file-compress                               Compress rotated Hubble export files.\n      --hubble-export-file-max-backups int                        Number of rotated Hubble export files to keep. (default 5)\n      --hubble-export-file-max-size-mb int                        Size in MB at which to rotate Hubble export file. (default 10)\n      --hubble-export-file-path stdout                            Filepath to write Hubble events to. By specifying stdout the flows are logged instead of written to a rotated file.\n      --hubble-flowlogs-config-path string                        Filepath with configuration of hubble flowlogs\n      --hubble-listen-address string                              An additional address for Hubble server to listen to, e.g. \":4244\"\n      --hubble-metrics string                                     List of Hubble metrics to enable.\n      --hubble-metrics-server string                              Address to serve Hubble metrics on.\n      --hubble-metrics-server-enable-tls                          Run the Hubble metrics server on the given listen address with TLS.\n      --hubble-metrics-server-tls-cert-file string                Path to the public key file for the Hubble metrics server. The file must contain PEM encoded data.\n      --hubble-metrics-server-tls-client-ca-files strings         Paths to one or more public key files of client CA certificates to use for TLS with mutual authentication (mTLS). The files must contain PEM encoded data. When provided, this option effectively enables mTLS.\n      --hubble-metrics-server-tls-key-file string                 Path to the private key file for the Hubble metrics server. The file must contain PEM encoded data.\n      --hubble-monitor-events strings                             Cilium monitor events for Hubble to observe: [drop debug capture trace policy-verdict trace-sock l7 agent]. By default, Hubble observes all monitor events.\n      --hubble-network-policy-correlation-enabled                 Enable network policy correlation of Hubble flows (default true)\n      --hubble-prefer-ipv6                                        Prefer IPv6 addresses for announcing nodes when both address types are available.\n      --hubble-redact-enabled                                     Hubble redact sensitive information from flows\n      --hubble-redact-http-headers-allow strings                  HTTP headers to keep visible in flows\n      --hubble-redact-http-headers-deny strings                   HTTP headers to redact from flows\n      --hubble-redact-http-urlquery                               Hubble redact http URL query from flows\n      --hubble-redact-http-userinfo                               Hubble redact http user info from flows (default true)\n      --hubble-redact-kafka-apikey                                Hubble redact Kafka API key from flows\n      --hubble-skip-unknown-cgroup-ids                            Skip Hubble events with unknown cgroup ids (default true)\n      --hubble-socket-path string                                 Set hubble's socket path to listen for connections (default \"/var/run/cilium/hubble.sock\")\n      --hubble-tls-cert-file string                               Path to the public key file for the Hubble server. The file must contain PEM encoded data.\n      --hubble-tls-client-ca-files strings                        Paths to one or more public key files of client CA certificates to use for TLS with mutual authentication (mTLS). The files must contain PEM encoded data. When provided, this option effectively enables mTLS.\n      --hubble-tls-key-file string                                Path to the private key file for the Hubble server. The file must contain PEM encoded data.\n      --identity-allocation-mode string                           Method to use for identity allocation (default \"kvstore\")\n      --identity-allocation-sync-interval duration                Periodic synchronization interval of the allocated identities (default 5m0s)\n      --identity-allocation-timeout duration                      Timeout for identity allocation operations (default 2m0s)\n      --identity-change-grace-period duration                     Time to wait before using new identity on endpoint identity change (default 5s)\n      --identity-management-mode string                           Configure whether Cilium Identities are managed by cilium-agent, cilium-operator, or both (default \"agent\")\n      --identity-max-jitter duration                              Maximum jitter time to begin processing CiliumIdentity updates (default 30s)\n      --identity-restore-grace-period duration                    Time to wait before releasing unused restored CIDR identities during agent restart (default 30s)\n      --ignore-flags-drift-checker strings                        Ignores specified flags during drift checking\n      --ingress-secrets-namespace string                          IngressSecretsNamespace is the namespace having tls secrets used by CEC, originating from Ingress controller\n      --install-no-conntrack-iptables-rules                       Install Iptables rules to skip netfilter connection tracking on all pod traffic. This option is only effective when Cilium is running in direct routing and full KPR mode. Moreover, this option cannot be enabled when Cilium is running in a managed Kubernetes environment or in a chained CNI setup.\n      --install-uplink-routes-for-delegated-ipam                  Install ingress/egress routes through uplink on host for Pods when working with delegated IPAM plugin.\n      --ip-masq-agent-config-path string                          ip-masq-agent configuration file path (default \"/etc/config/ip-masq-agent\")\n      --ipam string                                               Backend to use for IPAM (default \"cluster-pool\")\n      --ipam-cilium-node-update-rate duration                     Maximum rate at which the CiliumNode custom resource is updated (default 15s)\n      --ipam-default-ip-pool string                               Name of the default IP Pool when using multi-pool (default \"default\")\n      --ipam-multi-pool-pre-allocation map                        Defines the minimum number of IPs a node should pre-allocate from each pool (default default=8)\n      --ipsec-key-file string                                     Path to IPsec key file\n      --ipsec-key-rotation-duration duration                      Maximum duration of the IPsec key rotation. The previous key will be removed after that delay. (default 5m0s)\n      --iptables-lock-timeout duration                            Time to pass to each iptables invocation to wait for xtables lock acquisition (default 5s)\n      --iptables-random-fully                                     Set iptables flag random-fully on masquerading rules\n      --ipv4-native-routing-cidr string                           Allows to explicitly specify the IPv4 CIDR for native routing. When specified, Cilium assumes networking for this CIDR is preconfigured and hands traffic destined for that range to the Linux network stack without applying any SNAT. Generally speaking, specifying a native routing CIDR implies that Cilium can depend on the underlying networking stack to route packets to their destination. To offer a concrete example, if Cilium is configured to use direct routing and the Kubernetes CIDR is included in the native routing CIDR, the user must configure the routes to reach pods, either manually or by setting the auto-direct-node-routes flag.\n      --ipv4-node string                                          IPv4 address of node (default \"auto\")\n      --ipv4-pod-subnets strings                                  List of IPv4 pod subnets to preconfigure for encryption\n      --ipv4-range string                                         Per-node IPv4 endpoint prefix, e.g. 10.16.0.0/16 (default \"auto\")\n      --ipv4-service-loopback-address string                      IPv4 source address to use for SNAT when a Pod talks to itself over a Service. (default \"169.254.42.1\")\n      --ipv4-service-range string                                 Kubernetes IPv4 services CIDR if not inside cluster prefix (default \"auto\")\n      --ipv6-cluster-alloc-cidr string                            IPv6 /64 CIDR used to allocate per node endpoint /96 CIDR (default \"f00d::/64\")\n      --ipv6-mcast-device string                                  Device that joins a Solicited-Node multicast group for IPv6\n      --ipv6-native-routing-cidr string                           Allows to explicitly specify the IPv6 CIDR for native routing. When specified, Cilium assumes networking for this CIDR is preconfigured and hands traffic destined for that range to the Linux network stack without applying any SNAT. Generally speaking, specifying a native routing CIDR implies that Cilium can depend on the underlying networking stack to route packets to their destination. To offer a concrete example, if Cilium is configured to use direct routing and the Kubernetes CIDR is included in the native routing CIDR, the user must configure the routes to reach pods, either manually or by setting the auto-direct-node-routes flag.\n      --ipv6-node string                                          IPv6 address of node (default \"auto\")\n      --ipv6-pod-subnets strings                                  List of IPv6 pod subnets to preconfigure for encryption\n      --ipv6-range string                                         Per-node IPv6 endpoint prefix, e.g. fd02:1:1::/96 (default \"auto\")\n      --ipv6-service-range string                                 Kubernetes IPv6 services CIDR if not inside cluster prefix (default \"auto\")\n      --k8s-api-server-urls strings                               Kubernetes API server URLs\n      --k8s-client-burst int                                      Burst value allowed for the K8s client (default 20)\n      --k8s-client-connection-keep-alive duration                 Configures the keep alive duration of K8s client connections. K8 client is disabled if the value is set to 0 (default 30s)\n      --k8s-client-connection-timeout duration                    Configures the timeout of K8s client connections. K8s client is disabled if the value is set to 0 (default 30s)\n      --k8s-client-qps float32                                    Queries per second limit for the K8s client (default 10)\n      --k8s-heartbeat-timeout duration                            Configures the timeout for api-server heartbeat, set to 0 to disable (default 30s)\n      --k8s-kubeconfig-path string                                Absolute path of the kubernetes kubeconfig file\n      --k8s-namespace string                                      Name of the Kubernetes namespace in which Cilium is deployed in\n      --k8s-require-ipv4-pod-cidr                                 Require IPv4 PodCIDR to be specified in node resource\n      --k8s-require-ipv6-pod-cidr                                 Require IPv6 PodCIDR to be specified in node resource\n      --k8s-service-proxy-name string                             Value of K8s service-proxy-name label for which Cilium handles the services (empty = all services without service.kubernetes.io/service-proxy-name label)\n      --keep-config                                               When restoring state, keeps containers' configuration in place\n      --kube-proxy-replacement                                    Enable kube-proxy replacement\n      --kube-proxy-replacement-healthz-bind-address string        The IP address with port for kube-proxy replacement health check server to serve on (set to '0.0.0.0:10256' for all IPv4 interfaces and '[::]:10256' for all IPv6 interfaces). Set empty to disable.\n      --kvstore string                                            Key-value store type\n      --kvstore-lease-ttl duration                                Time-to-live for the KVstore lease. (default 15m0s)\n      --kvstore-max-consecutive-quorum-errors uint                Max acceptable kvstore consecutive quorum errors before recreating the etcd connection (default 2)\n      --kvstore-opt stringToString                                Key-value store options e.g. etcd.address=127.0.0.1:4001 (default [])\n      --l2-announcements-lease-duration duration                  Duration of inactivity after which a new leader is selected (default 15s)\n      --l2-announcements-renew-deadline duration                  Interval at which the leader renews a lease (default 5s)\n      --l2-announcements-retry-period duration                    Timeout after a renew failure, before the next retry (default 2s)\n      --l2-pod-announcements-interface-pattern string             Regex matching interfaces used for sending gratuitous ARP and NDP messages\n      --label-prefix-file string                                  Valid label prefixes file path\n      --labels strings                                            List of label prefixes used to determine identity of an endpoint\n      --lb-state-file string                                      Synchronize load-balancing state from the specified file\n      --lib-dir string                                            Directory path to store runtime build environment (default \"/var/lib/cilium\")\n      --local-router-ipv4 string                                  Link-local IPv4 used for Cilium's router devices\n      --local-router-ipv6 string                                  Link-local IPv6 used for Cilium's router devices\n      --log-driver strings                                        Logging endpoints to use for example syslog\n      --log-opt map                                               Log driver options for cilium-agent, configmap example for syslog driver: {\"syslog.level\":\"info\",\"syslog.facility\":\"local5\",\"syslog.tag\":\"cilium-agent\"}\n      --log-system-load                                           Enable periodic logging of system load\n      --lrp-address-matcher-cidrs strings                         Limit address matches to specific CIDRs\n      --max-connected-clusters uint32                             Maximum number of clusters to be connected in a clustermesh. Increasing this value will reduce the maximum number of identities available. Valid configurations are [255, 511]. (default 255)\n      --mesh-auth-enabled                                         Enable authentication processing & garbage collection (beta) (default true)\n      --mesh-auth-gc-interval duration                            Interval in which auth entries are attempted to be garbage collected (default 5m0s)\n      --mesh-auth-mutual-connect-timeout duration                 Timeout for connecting to the remote node TCP socket (default 5s)\n      --mesh-auth-mutual-listener-port int                        Port on which the Cilium Agent will perform mutual authentication handshakes between other Agents\n      --mesh-auth-queue-size int                                  Queue size for the auth manager (default 1024)\n      --mesh-auth-rotated-identities-queue-size int               The size of the queue for signaling rotated identities. (default 1024)\n      --mesh-auth-spiffe-trust-domain string                      The trust domain for the SPIFFE identity. (default \"spiffe.cilium\")\n      --mesh-auth-spire-admin-socket string                       The path for the SPIRE admin agent Unix socket.\n      --metrics strings                                           Metrics that should be enabled or disabled from the default metric list. (+metric_foo to enable metric_foo, -metric_bar to disable metric_bar)\n      --metrics-sampling-interval duration                        Set the internal metrics sampling interval (default 5m0s)\n      --monitor-aggregation string                                Level of monitor aggregation for traces from the datapath (default \"None\")\n      --monitor-aggregation-flags strings                         TCP flags that trigger monitor reports when monitor aggregation is enabled (default [syn,fin,rst])\n      --monitor-aggregation-interval duration                     Monitor report interval when monitor aggregation is enabled (default 5s)\n      --monitor-queue-size int                                    Size of the event queue when reading monitor events\n      --mtu int                                                   Overwrite auto-detected MTU of underlying network\n      --multicast-enabled                                         Enables multicast in Cilium\n      --nat-map-stats-entries int                                 Number k top stats entries to store locally in statedb (default 32)\n      --nat-map-stats-interval duration                           Interval upon which nat maps are iterated for stats (default 30s)\n      --node-encryption-opt-out-labels string                     Label selector for nodes which will opt-out of node-to-node encryption (default \"node-role.kubernetes.io/control-plane\")\n      --node-labels strings                                       List of label prefixes used to determine identity of a node (used only when enable-node-selector-labels is enabled)\n      --node-port-bind-protection                                 Reject application bind(2) requests to service ports in the NodePort range (default true)\n      --node-port-range strings                                   Set the min/max NodePort port range (default [30000,32767])\n      --nodeport-addresses strings                                A whitelist of CIDRs to limit which IPs are used for NodePort. If not set, primary IPv4 and/or IPv6 address of each native device is used.\n      --policy-accounting                                         Enable policy accounting (default true)\n      --policy-audit-mode                                         Enable policy audit (non-drop) mode\n      --policy-cidr-match-mode strings                            The entities that can be selected by CIDR policy. Supported values: 'nodes'\n      --policy-default-local-cluster                              Control whether policy rules assume by default the local cluster if not explicitly selected (default true)\n      --policy-queue-size uint                                    Size of queue for policy-related events (default 100)\n      --policy-secrets-namespace string                           PolicySecretsNamesapce is the namespace having secrets used in CNP and CCNP\n      --policy-secrets-only-from-secrets-namespace                Configures the agent to only read policy Secrets from the policy-secrets-namespace\n      --pprof                                                     Enable serving pprof debugging API\n      --pprof-address string                                      Address that pprof listens on (default \"localhost\")\n      --pprof-block-profile-rate int                              Enable goroutine blocking profiling and set the rate of sampled events in nanoseconds (set to 1 to sample all events [warning: performance overhead])\n      --pprof-mutex-profile-fraction int                          Enable mutex contention profiling and set the fraction of sampled events (set to 1 to sample all events)\n      --pprof-port uint16                                         Port that pprof listens on (default 6060)\n      --preallocate-bpf-maps                                      Enable BPF map pre-allocation (default true)\n      --prepend-iptables-chains                                   Prepend custom iptables chains instead of appending (default true)\n      --procfs string                                             Path to the host's proc filesystem mount (default \"/proc\")\n      --prometheus-serve-addr string                              IP:Port on which to serve prometheus metrics (pass \":Port\" to bind on all interfaces, \"\" is off)\n      --proxy-admin-port int                                      Port to serve Envoy admin interface on.\n      --proxy-connect-timeout uint                                Time after which a TCP connect attempt is considered failed unless completed (in seconds) (default 2)\n      --proxy-gid uint                                            Group ID for proxy control plane sockets. (default 1337)\n      --proxy-idle-timeout-seconds int                            Set Envoy upstream HTTP idle connection timeout seconds. Does not apply to connections with pending requests. Default 60s (default 60)\n      --proxy-initial-fetch-timeout uint                          Time after which an xDS stream is considered timed out (in seconds) (default 30)\n      --proxy-max-concurrent-retries uint32                       Maximum number of concurrent retries on Envoy clusters (default 128)\n      --proxy-max-connection-duration-seconds int                 Set Envoy HTTP option max_connection_duration seconds. Default 0 (disable)\n      --proxy-max-requests-per-connection int                     Set Envoy HTTP option max_requests_per_connection. Default 0 (disable)\n      --proxy-portrange-max uint16                                End of port range that is used to allocate ports for L7 proxies. (default 20000)\n      --proxy-portrange-min uint16                                Start of port range that is used to allocate ports for L7 proxies. (default 10000)\n      --proxy-prometheus-port int                                 Port to serve Envoy metrics on. Default 0 (disabled).\n      --proxy-xff-num-trusted-hops-egress uint32                  Number of trusted hops regarding the x-forwarded-for and related HTTP headers for the egress L7 policy enforcement Envoy listeners.\n      --proxy-xff-num-trusted-hops-ingress uint32                 Number of trusted hops regarding the x-forwarded-for and related HTTP headers for the ingress L7 policy enforcement Envoy listeners.\n      --read-cni-conf string                                      CNI configuration file to use as a source for --write-cni-conf-when-ready. If not supplied, a suitable one will be generated.\n      --restored-proxy-ports-age-limit uint                       Time after which a restored proxy ports file is considered stale (in minutes) (default 15)\n      --route-metric int                                          Overwrite the metric used by cilium when adding routes to its 'cilium_host' device\n      --routing-mode string                                       Routing mode (\"native\" or \"tunnel\") (default \"tunnel\")\n      --service-no-backend-response string                        Response to traffic for a service without backends (default \"reject\")\n      --socket-path string                                        Sets daemon's socket path to listen for connections (default \"/var/run/cilium/cilium.sock\")\n      --standalone-dns-proxy-server-port int                      Global port on which the gRPC server for standalone DNS proxy should listen (default 40045)\n      --state-dir string                                          Directory path to store runtime state (default \"/var/run/cilium\")\n      --static-cnp-path string                                    Directory path to watch and load static cilium network policy yaml files.\n      --status-collector-failure-threshold duration               The duration after which a probe is considered failed (default 1m0s)\n      --status-collector-interval duration                        The interval between probe invocations (default 5s)\n      --status-collector-probe-check-timeout duration             The timeout after which all probes should have finished at least once (default 5m0s)\n      --status-collector-stackdump-path string                    The path where probe stackdumps should be written to (default \"/run/cilium/state/agent.stack.gz\")\n      --status-collector-warning-threshold duration               The duration after which a probe is declared as stale (default 15s)\n      --tofqdns-dns-reject-response-code string                   DNS response code for rejecting DNS requests, available options are '[nameError refused]' (default \"refused\")\n      --tofqdns-enable-dns-compression                            Allow the DNS proxy to compress responses to endpoints that are larger than 512 Bytes or the EDNS0 option, if present (default true)\n      --tofqdns-endpoint-max-ip-per-hostname int                  Maximum number of IPs to maintain per FQDN name for each endpoint (default 1000)\n      --tofqdns-idle-connection-grace-period duration             Time during which idle but previously active connections with expired DNS lookups are still considered alive (default 0s)\n      --tofqdns-max-deferred-connection-deletes int               Maximum number of IPs to retain for expired DNS lookups with still-active connections (default 10000)\n      --tofqdns-min-ttl int                                       The minimum time, in seconds, to use DNS data for toFQDNs policies\n      --tofqdns-pre-cache string                                  DNS cache data at this path is preloaded on agent startup\n      --tofqdns-preallocate-identities                            Preallocate identities for ToFQDN selectors. This reduces proxied DNS response latency. Disable if you have many ToFQDN selectors. (default true)\n      --tofqdns-proxy-port int                                    Global port on which the in-agent DNS proxy should listen. Default 0 is a OS-assigned port.\n      --tofqdns-proxy-response-max-delay duration                 The maximum time the DNS proxy holds an allowed DNS response before sending it along. Responses are sent as soon as the datapath is updated with the new IP information. (default 100ms)\n      --trace-payloadlen int                                      Length of payload to capture when tracing native packets. (default 128)\n      --trace-payloadlen-overlay int                              Length of payload to capture when tracing overlay packets. (default 192)\n      --trace-sock                                                Enable tracing for socket-based LB (default true)\n      --tunnel-port uint16                                        Tunnel port (default 8472 for \"vxlan\" and 6081 for \"geneve\")\n      --tunnel-protocol string                                    Encapsulation protocol to use for the overlay (\"vxlan\" or \"geneve\") (default \"vxlan\")\n      --tunnel-source-port-range string                           Tunnel source port range hint (default 0-0) (default \"0-0\")\n      --underlay-protocol string                                  IP family for the underlay (\"ipv4\" or \"ipv6\") (default \"ipv4\")\n      --use-full-tls-context                                      If enabled, persist ca.crt keys into the Envoy config even in a terminatingTLS block on an L7 Cilium Policy. This is to enable compatibility with previously buggy behaviour. This flag is deprecated and will be removed in a future release.\n      --version                                                   Print version information\n      --vlan-bpf-bypass strings                                   List of explicitly allowed VLAN IDs, '0' id will allow all VLAN IDs\n      --vtep-cidr strings                                         List of VTEP CIDRs that will be routed towards VTEPs for traffic cluster egress\n      --vtep-endpoint strings                                     List of VTEP IP addresses\n      --vtep-mac strings                                          List of VTEP MAC addresses for forwarding traffic outside the cluster\n      --vtep-mask string                                          VTEP CIDR Mask for all VTEP CIDRs (default \"255.255.255.0\")\n      --wireguard-persistent-keepalive duration                   The Wireguard keepalive interval as a Go duration string\n      --write-cni-conf-when-ready string                          Write the CNI configuration to the specified path when agent is ready\n \n SEE ALSO \n \n cilium-agent completion \t - Generate the autocompletion script for the specified shell \n cilium-agent hive \t - Inspect the hive \n cilium-agent shell \t - Connect to the Cilium shell",
  "item_type": "markdown",
  "module_path": "/tmp/cilium-repo/Documentation/cmdref/cilium-agent.md",
  "extracted_at": "2025-09-03T01:13:29.129217Z"
}