{
  "url": "file:///tmp/cilium-repo/Documentation/cmdref/cilium_connectivity_test.md",
  "content": "cilium connectivity test \n Validate connectivity in cluster \n cilium connectivity test [flags]\n \n Options \n       --agent-daemonset-name string                           Name of cilium agent daemonset (default \"cilium\")\n      --agent-pod-selector string                             Label on cilium-agent pods to select with (default \"k8s-app=cilium\")\n      --all-flows                                             Print all flows during flow validation\n      --assume-cilium-version string                          Assume Cilium version for connectivity tests\n      --chart-directory string                                Helm chart directory\n      --cilium-pod-selector string                            Label selector matching all cilium-related pods (default \"app.kubernetes.io/part-of=cilium\")\n      --collect-sysdump-on-failure                            Collect sysdump after a test fails\n      --conn-disrupt-dispatch-interval duration               TCP packet dispatch interval\n      --conn-disrupt-test-restarts-path string                Conn disrupt test temporary result file (used internally) (default \"/tmp/cilium-conn-disrupt-restarts\")\n      --conn-disrupt-test-setup                               Set up conn disrupt test dependencies\n      --conn-disrupt-test-xfrm-errors-path string             Conn disrupt test temporary result file (used internally) (default \"/tmp/cilium-conn-disrupt-xfrm-errors\")\n      --connect-timeout duration                              Maximum time to allow initiation of the connection to take (default 2s)\n      --curl-image string                                     Image path to use for curl (default \"quay.io/cilium/alpine-curl:v1.10.0@sha256:913e8c9f3d960dde03882defa0edd3a919d529c2eb167caa7f54194528bde364\")\n      --curl-insecure                                         Pass --insecure to curl\n      --curl-parallel uint                                    Number of parallel requests in curl commands (0 to disable)\n  -d, --debug                                                 Show debug messages\n      --dns-test-server-image string                          Image path to use for CoreDNS (default \"registry.k8s.io/coredns/coredns:v1.12.3@sha256:1391544c978029fcddc65068f6ad67f396e55585b664ecccd7fefba029b9b706\")\n      --echo-image string                                     Image path to use for echo server (default \"gcr.io/k8s-staging-gateway-api/echo-advanced:v20240412-v1.0.0-394-g40c666fd\")\n      --external-cidr string                                  IPv4 CIDR to use as external target in connectivity tests (default \"1.0.0.0/8\")\n      --external-cidrv6 string                                IPv6 CIDR to use as external target in connectivity tests (default \"2606:4700:4700::/96\")\n      --external-ip string                                    IPv4 to use as external target in connectivity tests (default \"1.1.1.1\")\n      --external-ipv6 string                                  IPv6 to use as external target in connectivity tests (default \"2606:4700:4700::1111\")\n      --external-other-ip string                              Other IPv4 to use as external target in connectivity tests (default \"1.0.0.1\")\n      --external-other-ipv6 string                            Other IPv6 to use as external target in connectivity tests (default \"2606:4700:4700::1001\")\n      --external-other-target string                          Domain name to use as a second external target in connectivity tests (default \"k8s.io.\")\n      --external-target string                                Domain name to use as external target in connectivity tests (default \"one.one.one.one.\")\n      --external-target-ca-name string                        Name of the CA secret for the external target. (default \"cabundle\")\n      --external-target-ca-namespace string                   Namespace of the CA secret for the external target.\n      --external-target-ipv6-capable                          External target is IPv6 capable\n      --flow-validation string                                Enable Hubble flow validation { disabled | warning | strict } (default \"warning\")\n      --force-deploy                                          Force re-deploying test artifacts\n      --frr-image string                                      Image path to use for FRR (default \"quay.io/frrouting/frr:10.4.1@sha256:97a281a1473cae1f762ceab87cbcc53a2e102053877421e8b4606422aae45442\")\n      --helm-values-secret-name string                        Secret name to store the auto-generated helm values file. The namespace is the same as where Cilium will be installed (default \"cilium-cli-helm-values\")\n  -h, --help                                                  help for test\n      --hubble                                                Automatically use Hubble for flow validation & troubleshooting (default true)\n      --hubble-server string                                  Address of the Hubble endpoint for flow validation (default \"localhost:4245\")\n      --include-conn-disrupt-test                             Include conn disrupt test\n      --include-conn-disrupt-test-egw                         Include conn disrupt test for Egress Gateway\n      --include-conn-disrupt-test-ns-traffic                  Include conn disrupt test for NS traffic\n      --ip-families strings                                   Restrict test actions to specific IP families (default [ipv4,ipv6])\n      --json-mock-image string                                Image path to use for json mock (default \"quay.io/cilium/json-mock:v1.3.9@sha256:c98b26177a5a60020e5aa404896d55f0ab573d506f42acfb4aa4f5705a5c6f56\")\n      --junit-file string                                     Generate junit report and write to file\n      --junit-property map                                    Add key=value properties to the generated junit file\n      --k8s-version string                                    Kubernetes server version in case auto-detection fails\n      --multi-cluster string                                  Test across clusters to given context\n      --namespace-labels map                                  Add labels to the connectivity test namespace\n      --node-cidr strings                                     one or more CIDRs that cover all nodes in the cluster\n      --node-selector map                                     Restrict connectivity pods to nodes matching this label\n  -p, --pause-on-fail                                         Pause execution on test failure\n      --post-test-sleep duration                              Wait time after each test before next test starts\n      --print-flows                                           Print flow logs for each test\n      --print-image-artifacts                                 Prints the used image artifacts\n      --request-timeout duration                              Maximum time to allow a request to take (default 10s)\n      --retry uint                                            Number of retries on connection failure to external targets (default 3)\n      --retry-delay duration                                  Delay between retries for external targets (default 3s)\n      --secondary-network-iface string                        Secondary network iface name (e.g., to test NodePort BPF on multiple networks)\n      --service-type string                                   Type of Kubernetes Services created for connectivity tests (default \"NodePort\")\n      --single-node                                           Limit to tests able to run on a single node\n      --socat-image string                                    Image path to use for multicast tests (default \"docker.io/alpine/socat:1.8.0.3@sha256:fe469fd30a68365e2a0f0ccee6c170cc56ee703b19c9d1489ecac89639cc095d\")\n      --sysdump-cilium-bugtool-flags stringArray              Optional set of flags to pass to cilium-bugtool command.\n      --sysdump-cilium-daemon-set-label-selector string       The labels used to target Cilium daemon set (default \"k8s-app=cilium\")\n      --sysdump-cilium-envoy-label-selector string            The labels used to target Cilium Envoy pods (default \"k8s-app=cilium-envoy\")\n      --sysdump-cilium-helm-release-name string               The Cilium Helm release name for which to get values. If not provided then the --helm-release-name global flag is used (if provided)\n      --sysdump-cilium-label-selector string                  The labels used to target Cilium pods (default \"k8s-app=cilium\")\n      --sysdump-cilium-namespace string                       The namespace Cilium is running in. If not provided then the --namespace global flag is used (if provided)\n      --sysdump-cilium-node-init-selector string              The labels used to target Cilium node init pods (default \"app=cilium-node-init\")\n      --sysdump-cilium-operator-label-selector string         The labels used to target Cilium operator pods (default \"io.cilium/app=operator\")\n      --sysdump-cilium-operator-namespace string              The namespace Cilium operator is running in. If not provided then the --namespace global flag is used (if provided)\n      --sysdump-cilium-spire-agent-selector string            The labels used to target Cilium spire-agent pods (default \"app=spire-agent\")\n      --sysdump-cilium-spire-namespace string                 The namespace Cilium SPIRE installation is running in\n      --sysdump-cilium-spire-server-selector string           The labels used to target Cilium spire-server pods (default \"app=spire-server\")\n      --sysdump-clustermesh-apiserver-label-selector string   The labels used to target 'clustermesh-apiserver' pods (default \"k8s-app=clustermesh-apiserver\")\n      --sysdump-cni-config-directory string                   Directory where CNI configs are located (default \"/etc/cni/net.d/\")\n      --sysdump-cni-configmap-name string                     The name of the CNI config map (default \"cni-configuration\")\n      --sysdump-collect-logs-from-not-ready-agents            Whether to collect logs from not ready Cilium agent pods (default true)\n      --sysdump-copy-retry-limit int                          Retry limit for file copying operations. If set to -1, copying will be retried indefinitely. Useful for collecting sysdump while on unreliable connection. (default 100)\n      --sysdump-debug                                         Whether to enable debug logging\n      --sysdump-detect-gops-pid                               Whether to automatically detect the gops agent PID.\n      --sysdump-extra-label-selectors stringArray             Optional set of labels selectors used to target additional pods for log collection.\n      --sysdump-hubble-flows-count int                        Number of Hubble flows to collect. Setting to zero disables collecting Hubble flows. (default 10000)\n      --sysdump-hubble-flows-timeout duration                 Timeout for collecting Hubble flows (default 5s)\n      --sysdump-hubble-generate-certs-labels string           The labels used to target Hubble UI pods (default \"k8s-app=hubble-generate-certs\")\n      --sysdump-hubble-label-selector string                  The labels used to target Hubble pods (default \"k8s-app=hubble\")\n      --sysdump-hubble-relay-labels string                    The labels used to target Hubble Relay pods (default \"k8s-app=hubble-relay\")\n      --sysdump-hubble-ui-labels string                       The labels used to target Hubble UI pods (default \"k8s-app=hubble-ui\")\n      --sysdump-logs-limit-bytes int                          The limit on the number of bytes to retrieve when collecting logs (default 1073741824)\n      --sysdump-logs-since-time duration                      How far back in time to go when collecting logs (default 8760h0m0s)\n      --sysdump-node-list string                              Comma-separated list of node IPs or names to filter pods for which to collect gops and logs\n      --sysdump-output-filename string                        The name of the resulting file (without extension)\n                                                              '<ts>' can be used as the placeholder for the timestamp (default \"cilium-sysdump-<ts>\")\n      --sysdump-profiling                                     Whether to enable scraping profiling data (default true)\n      --sysdump-quick                                         Whether to enable quick mode (i.e. skip collection of 'cilium-bugtool' output and logs)\n      --sysdump-tetragon-helm-release-name string             The Tetragon Helm release name for which to get values.\n      --sysdump-tetragon-label-selector string                The labels used to target Tetragon pods (default \"app.kubernetes.io/name=tetragon\")\n      --sysdump-tetragon-namespace string                     The namespace Tetragon is running in (default \"kube-system\")\n      --sysdump-tetragon-operator-label-selector string       The labels used to target Tetragon operator pods (default \"app.kubernetes.io/name=tetragon-operator\")\n      --sysdump-tracing                                       Whether to enable scraping tracing data\n      --sysdump-worker-count int                              The number of workers to use\n                                                              NOTE: There is a lower bound requirement on the number of workers for the sysdump operation to be effective. Therefore, for low values, the actual number of workers may be adjusted upwards. Defaults to the number of available CPUs. (default 20)\n      --test strings                                          Run tests that match one of the given regular expressions, skip tests by starting the expression with '!', target Scenarios with e.g. '/pod-to-cidr'\n      --test-concurrency int                                  Count of namespaces to perform the connectivity tests in parallel (value <= 0 will be treated as 1) (default 1)\n      --test-conn-disrupt-image string                        Image path to use for connection disruption tests (default \"quay.io/cilium/test-connection-disruption:v0.0.16@sha256:e8e3257b2c89543dc49a2d820f2d2d69c1fe60eaf1036fc1f1f7375bad8e6232\")\n      --test-namespace string                                 Namespace to perform the connectivity in (always suffixed with a sequence number to be compliant with test-concurrency param, e.g.: cilium-test-1) (default \"cilium-test\")\n      --timeout duration                                      Maximum time to allow the connectivity test suite to take\n  -t, --timestamp                                             Show timestamp in messages\n      --tolerations strings                                   Extra NoSchedule tolerations added to test pods\n  -v, --verbose                                               Show informational messages and don't buffer any lines\n \n Options inherited from parent commands \n       --as string                  Username to impersonate for the operation. User could be a regular user or a service account in a namespace.\n      --as-group stringArray       Group to impersonate for the operation, this flag can be repeated to specify multiple groups.\n      --context string             Kubernetes configuration context\n      --helm-release-name string   Helm release name (default \"cilium\")\n      --kubeconfig string          Path to the kubeconfig file\n  -n, --namespace string           Namespace Cilium is running in (default \"kube-system\")\n \n SEE ALSO \n \n cilium connectivity \t - Connectivity troubleshooting",
  "item_type": "markdown",
  "module_path": "/tmp/cilium-repo/Documentation/cmdref/cilium_connectivity_test.md",
  "extracted_at": "2025-09-03T01:13:29.103765Z"
}