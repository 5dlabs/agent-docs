{
  "url": "file:///tmp/cilium-repo/Documentation/installation/k3s.rst",
  "content": ".. only:: not (epub or latex or html)\n\n    WARNING: You are looking at unreleased Cilium documentation.\n    Please use the official rendered version released here:\n    https://docs.cilium.io\n\n.. _k3s_install:\n\n**********************\nInstallation Using K3s\n**********************\n\nThis guide walks you through installation of Cilium on `K3s <https://k3s.io/>`_,\na highly available, certified Kubernetes distribution designed for production\nworkloads in unattended, resource-constrained, remote locations or inside IoT\nappliances.\n\nCilium is presently supported on amd64 and arm64 architectures.\n\nInstall a Master Node\n=====================\n\nThe first step is to install a K3s master node making sure to disable support\nfor the default CNI plugin and the built-in network policy enforcer:\n\n.. note::\n\n   If running Cilium in :ref:`kubeproxy-free` mode, add option ``--disable-kube-proxy``\n\n.. code-block:: shell-session\n\n    curl -sfL https://get.k3s.io | INSTALL_K3S_EXEC='--flannel-backend=none --disable-network-policy' sh -\n\nInstall Agent Nodes (Optional)\n==============================\n\nK3s can run in standalone mode or as a cluster making it a great choice for\nlocal testing with multi-node data paths. Agent nodes are joined to the master\nnode using a node-token which can be found on the master node at\n``/var/lib/rancher/k3s/server/node-token``.\n\nInstall K3s on agent nodes and join them to the master node making sure to\nreplace the variables with values from your environment:\n\n.. code-block:: shell-session\n\n    curl -sfL https://get.k3s.io | K3S_URL='https://${MASTER_IP}:6443' K3S_TOKEN=${NODE_TOKEN} sh -\n\nShould you encounter any issues during the installation, please refer to the\n:ref:`troubleshooting_k8s` section and/or seek help on `Cilium Slack`_.\n\nPlease consult the Kubernetes :ref:`k8s_requirements` for information on  how\nyou need to configure your Kubernetes cluster to operate with Cilium.\n\nConfigure Cluster Access\n========================\n\nFor the Cilium CLI to access the cluster in successive steps you will need to\nuse the ``kubeconfig`` file stored at ``/etc/rancher/k3s/k3s.yaml`` by setting\nthe ``KUBECONFIG`` environment variable:\n\n.. code-block:: shell-session\n\n    export KUBECONFIG=/etc/rancher/k3s/k3s.yaml\n\nInstall Cilium\n==============\n\n.. include:: cli-download.rst\n\n.. note::\n\n   Install Cilium with ``--set=ipam.operator.clusterPoolIPv4PodCIDRList=\"10.42.0.0/16\"`` to match k3s default podCIDR 10.42.0.0/16.\n\n.. note::\n    If you are using Rancher Desktop, you may need to override the cni path by adding the additional flag ``--set 'cni.binPath=/usr/libexec/cni'``\n\nInstall Cilium by running:\n\n.. parsed-literal::\n\n    cilium install |CHART_VERSION| --set=ipam.operator.clusterPoolIPv4PodCIDRList=\"10.42.0.0/16\"\n\nValidate the Installation\n=========================\n\n.. include:: cli-status.rst\n.. include:: cli-connectivity-test.rst\n\n.. include:: next-steps.rst\n\n",
  "item_type": "unknown",
  "module_path": "/tmp/cilium-repo/Documentation/installation/k3s.rst",
  "extracted_at": "2025-09-03T01:13:29.317401Z"
}