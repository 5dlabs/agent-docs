{
  "url": "file:///tmp/cilium-repo/Documentation/network/servicemesh/gateway-api/header.rst",
  "content": ".. only:: not (epub or latex or html)\n\n    WARNING: You are looking at unreleased Cilium documentation.\n    Please use the official rendered version released here:\n    https://docs.cilium.io\n\n.. _gs_gateway_header:\n\n*****************************\nHTTP Header Modifier Examples\n*****************************\n\nThe Gateway can modify the headers of HTTP requests from clients. \n\n.. include:: ../echo-app.rst\n\nDeploy the Cilium Gateway\n=========================\n\nHTTP header modification is the process of adding, removing, or modifying HTTP headers in incoming requests.\nTo configure HTTP header modification, define a Gateway object with one or more HTTP filters. Each filter specifies a specific modification to make to incoming requests, such as adding a custom header or modifying an existing header.\n\nTo add a header to a HTTP request, use a filter of the type ``RequestHeaderModifier`` with the ``add`` action and the name and value of the header.\n\nYou can find an example Gateway and HTTPRoute definition in ``request-header.yaml``:\n\n.. literalinclude:: ../../../../examples/kubernetes/gateway/request-header.yaml\n     :language: yaml\n\nThis example adds a header named ``my-header-name`` with the ``my-header-value`` value.\n\nDeploy the Gateway and the HTTPRoute:\n\n.. parsed-literal::\n\n    $ kubectl apply -f \\ |SCM_WEB|\\/examples/kubernetes/gateway/request-header.yaml\n\nThe preceding kubectl command creates a Gateway named ``cilium-gw`` that listens on port 80.\n\n.. code-block:: shell-session\n\n    $ kubectl get gateway cilium-gw\n    NAME        CLASS    ADDRESS          PROGRAMMED   AGE\n    cilium-gw   cilium   172.18.255.200                8s\n\n.. Note::\n\n    Some providers like EKS use a fully-qualified domain name rather than an IP address.\n\nModify incoming HTTP Requests \n=============================\n\nNow that the Gateway is ready, you can make HTTP requests.\n\n.. code-block:: shell-session\n\n    $ curl -s http://$GATEWAY/add-a-request-header | grep -A 6 \"Request Headers\"\n    Request Headers:\n        accept=*/*  \n        host=172.18.255.200  \n        my-header-name=my-header-value  \n        user-agent=curl/7.81.0  \n        x-forwarded-proto=http\n        x-request-id=61a72702-3dfa-4bc3-a21c-7544ef36af7b\n\nIf the curl succeeds, you can see the HTTP Header from the incoming request in the body of the response sent back from the echo server. You can also see that the Gateway added the header.\n\nYou can also remove headers with the ``remove`` keyword and a list of header names.\n\n.. code-block:: shell-session\n\n    filters\n    - type: RequestHeaderModifier\n      requestHeaderModifier:\n        remove: [\"x-request-id\"]\n\nNotice that the ``x-request-id`` header is removed when you add the ``remove-a-request-header`` prefix match to the filter:\n\n.. code-block:: shell-session\n\n    $ curl --fail -s http://$GATEWAY/remove-a-request-header | grep -A 6 \"Request Headers\"\n    Request Headers:\n        accept=*/*  \n        host=172.18.255.200  \n        user-agent=curl/7.81.0  \n        x-forwarded-proto=http  \n\nTo edit an existing header, use the ``set`` action to specify the value of the header to modify as well as the new header value to set.\n\n.. code-block:: shell-session\n\n    filters:\n    - type: RequestHeaderModifier\n      requestHeaderModifier:\n        set:\n        - name: x-request-id\n          value: set-cilium-header-value\n\nNotice that the ``x-request-id`` header is changed when you add the ``edit-a-request-header`` prefix match to the filter:\n\n.. code-block:: shell-session\n\n    $ curl -s http://$GATEWAY/edit-a-request-header | grep -A 6 \"Request Headers\"\n    Request Headers:\n        accept=*/*  \n        host=172.18.255.200  \n        user-agent=curl/7.81.0  \n        x-forwarded-proto=http  \n        x-request-id=set-cilium-header-value",
  "item_type": "unknown",
  "module_path": "/tmp/cilium-repo/Documentation/network/servicemesh/gateway-api/header.rst",
  "extracted_at": "2025-09-03T01:13:29.166186Z"
}